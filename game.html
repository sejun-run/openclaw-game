<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#1a1a2e">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.svg">
  <title>ì„œë²„ ë””íœìŠ¤ - ì¸í”„ë¼ ì¹´ë“œê²Œì„</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #eee;
      font-family: 'Segoe UI', sans-serif;
      user-select: none;
    }
    
    /* ê²Œì„ ëª¨ë“œ: ê³ ì • ë ˆì´ì•„ì›ƒ */
    body.game-active {
      position: fixed;
      width: 100%;
      height: 100%;
      height: 100dvh;
      top: 0;
      left: 0;
      overflow: hidden;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 10px;
      height: 100%;
      height: 100dvh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .container.game-mode {
      padding: 3px;
      max-width: 100%;
    }

    header {
      text-align: center;
      padding: 10px 0;
      margin-bottom: 10px;
      flex-shrink: 0;
    }

    header.hidden { display: none; }

    h1 {
      font-size: 2.5em;
      background: linear-gradient(90deg, #00d9ff, #00ff88);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 10px;
    }

    .subtitle { color: #888; font-size: 1.1em; }

    .tabs {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 15px;
      flex-shrink: 0;
    }

    .tabs.hidden { display: none; }

    .tab-btn {
      padding: 12px 30px;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 25px;
      color: #fff;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1em;
    }

    .tab-btn:hover, .tab-btn.active {
      background: linear-gradient(90deg, #00d9ff, #00ff88);
      color: #000;
      border-color: transparent;
    }

    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* ì¹´ë“œ ê·¸ë¦¬ë“œ */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
    }

    .filter-btn {
      padding: 8px 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      color: #aaa;
      cursor: pointer;
      font-size: 0.85em;
      transition: all 0.3s;
    }

    .filter-btn:hover, .filter-btn.active {
      background: rgba(255,255,255,0.15);
      color: #fff;
    }

    /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
    .card {
      background: linear-gradient(145deg, #2a2a4a, #1a1a2e);
      border-radius: 15px;
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
      position: relative;
      overflow: hidden;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 217, 255, 0.3);
    }

    .card.computing { border-color: #ff6b6b; }
    .card.storage { border-color: #ffd93d; }
    .card.database { border-color: #6bcb77; }
    .card.network { border-color: #4d96ff; }
    .card.security { border-color: #9b59b6; }
    .card.devops { border-color: #ff9f43; }
    .card.monitoring { border-color: #00cec9; }
    .card.attack { border-color: #e74c3c; }

    .card-icon { font-size: 2.5em; text-align: center; margin-bottom: 10px; }
    .card-name { font-weight: bold; font-size: 1.1em; text-align: center; margin-bottom: 5px; }
    .card-type { font-size: 0.75em; text-align: center; color: #888; text-transform: uppercase; letter-spacing: 1px; }

    .card-stats {
      display: flex;
      justify-content: space-around;
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .stat { text-align: center; }
    .stat-value { font-weight: bold; font-size: 1.2em; color: #00d9ff; }
    .stat-label { font-size: 0.7em; color: #666; }

    /* ëª¨ë‹¬ */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .modal-overlay.active { display: flex; }

    .modal {
      background: linear-gradient(145deg, #2a2a4a, #1a1a2e);
      border-radius: 20px;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }

    .modal-header {
      padding: 30px;
      text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .modal-icon { font-size: 4em; margin-bottom: 15px; }
    .modal-name { font-size: 1.8em; margin-bottom: 5px; }
    .modal-category { color: #888; text-transform: uppercase; letter-spacing: 2px; font-size: 0.85em; }

    .modal-body { padding: 30px; }
    .modal-section { margin-bottom: 25px; }
    .modal-section h3 { color: #00d9ff; margin-bottom: 10px; font-size: 1em; text-transform: uppercase; letter-spacing: 1px; }
    .modal-section p { color: #ccc; line-height: 1.7; }

    .modal-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 25px;
    }

    .modal-stat {
      background: rgba(0,0,0,0.3);
      padding: 15px;
      border-radius: 10px;
      text-align: center;
    }

    .modal-stat-value { font-size: 1.5em; font-weight: bold; color: #00ff88; }
    .modal-stat-label { font-size: 0.75em; color: #888; margin-top: 5px; }

    .services-list { display: flex; flex-wrap: wrap; gap: 8px; }
    .service-tag { background: rgba(255,255,255,0.1); padding: 5px 12px; border-radius: 15px; font-size: 0.85em; }
    .service-tag.aws { border-left: 3px solid #ff9900; }
    .service-tag.gcp { border-left: 3px solid #4285f4; }
    .service-tag.azure { border-left: 3px solid #0089d6; }

    .close-btn {
      position: absolute;
      top: 15px; right: 15px;
      background: none;
      border: none;
      color: #888;
      font-size: 1.5em;
      cursor: pointer;
    }

    .close-btn:hover { color: #fff; }

    .tip-box {
      background: rgba(0, 217, 255, 0.1);
      border-left: 3px solid #00d9ff;
      padding: 15px;
      border-radius: 0 10px 10px 0;
      margin-top: 15px;
    }

    .tip-box strong { color: #00d9ff; }

    /* ========== ê²Œì„ í™”ë©´ ========== */
    .game-wrapper {
      display: none;
    }

    .game-wrapper.active { 
      display: flex;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      height: 100dvh;
      padding: 5px;
      gap: 5px;
      box-sizing: border-box;
    }

    .game-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2px;
      overflow: hidden;
      min-width: 0;
    }

    /* ì¹´ë“œ ì •ë³´ íŒ¨ë„ (ìš°ì¸¡) - ë°ìŠ¤í¬í†±ë§Œ */
    .card-info-panel {
      width: 250px;
      background: rgba(0,0,0,0.3);
      border-radius: 10px;
      padding: 15px;
      overflow-y: auto;
      flex-shrink: 0;
    }

    @media (max-width: 1000px) {
      .card-info-panel { display: none !important; }
    }

    .card-info-panel.empty {
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 0.9em;
      text-align: center;
      min-height: 300px;
    }

    .info-card-header {
      text-align: center;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 15px;
    }

    .info-card-icon { font-size: 3em; margin-bottom: 10px; }
    .info-card-name { font-size: 1.4em; font-weight: bold; margin-bottom: 5px; }
    .info-card-category { font-size: 0.8em; color: #888; text-transform: uppercase; }

    .info-stats {
      display: flex;
      justify-content: space-around;
      padding: 15px 0;
      background: rgba(0,0,0,0.2);
      border-radius: 10px;
      margin-bottom: 15px;
    }

    .info-stat { text-align: center; }
    .info-stat-value { font-size: 1.3em; font-weight: bold; color: #00d9ff; }
    .info-stat-label { font-size: 0.7em; color: #666; }

    .info-section { margin-bottom: 15px; }
    .info-section h4 { font-size: 0.85em; color: #00d9ff; margin-bottom: 8px; }
    .info-section p { font-size: 0.85em; color: #aaa; line-height: 1.5; }

    .info-services { display: flex; flex-wrap: wrap; gap: 5px; }
    .info-service {
      font-size: 0.75em;
      background: rgba(255,255,255,0.1);
      padding: 3px 8px;
      border-radius: 10px;
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 3px 8px;
      background: rgba(0,0,0,0.3);
      border-radius: 5px;
      flex-shrink: 0;
    }

    .turn-indicator {
      font-size: 0.8em;
      padding: 4px 12px;
      border-radius: 12px;
      background: linear-gradient(90deg, #00d9ff, #00ff88);
      color: #000;
      font-weight: bold;
    }

    .turn-indicator.enemy { background: linear-gradient(90deg, #e74c3c, #c0392b); color: #fff; }

    .mana-display {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 0.9em;
    }

    .mana-orbs { display: flex; gap: 2px; }
    .mana-orb {
      width: 14px; height: 14px;
      border-radius: 50%;
      background: #00d9ff;
      box-shadow: 0 0 5px #00d9ff;
    }
    .mana-orb.empty { background: #333; box-shadow: none; }

    /* í”Œë ˆì´ì–´ ì˜ì—­ */
    .player-section {
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding: 4px;
      background: rgba(0,0,0,0.2);
      border-radius: 6px;
      flex: 2;
      min-height: 0;
      overflow: hidden;
    }

    .player-section.enemy { border: 2px solid rgba(231, 76, 60, 0.3); }
    .player-section.player { border: 2px solid rgba(0, 217, 255, 0.3); }
    .player-section.drop-target { border: 2px dashed #00ff88; background: rgba(0, 255, 136, 0.1); }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
    }

    .player-name { font-weight: bold; font-size: 0.75em; }
    .player-name.enemy { color: #e74c3c; }
    .player-name.player { color: #00d9ff; }

    .health-bar {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .health-bar-bg {
      width: 100px;
      height: 12px;
      background: rgba(255,255,255,0.1);
      border-radius: 6px;
      overflow: hidden;
    }

    .health-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #27ae60, #2ecc71);
      transition: width 0.5s;
    }

    .health-bar-fill.low { background: linear-gradient(90deg, #e74c3c, #c0392b); }

    .health-text { font-weight: bold; min-width: 50px; font-size: 0.7em; }

    .field {
      display: flex;
      gap: 4px;
      flex: 1;
      min-height: 0;
      padding: 3px;
      background: rgba(0,0,0,0.2);
      border-radius: 5px;
      flex-wrap: wrap;
      align-items: center;
      align-content: center;
      justify-content: center;
      overflow: hidden;
    }

    .field-placeholder {
      color: #555;
      font-size: 0.65em;
      padding: 5px;
      text-align: center;
      width: 100%;
    }

    .field-card {
      width: 50px;
      height: 55px;
      background: linear-gradient(145deg, #3a3a5a, #2a2a4a);
      border-radius: 5px;
      padding: 2px;
      text-align: center;
      position: relative;
      cursor: pointer;
      border: 2px solid transparent;
      display: flex;
      flex-direction: column;
      justify-content: center;
      flex-shrink: 0;
    }

    .field-card:hover { border-color: #00d9ff; }
    .field-card.selected { border-color: #00ff88; box-shadow: 0 0 15px rgba(0, 255, 136, 0.5); }
    .field-card.can-attack { animation: pulse 1s infinite; }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 5px rgba(0, 255, 136, 0.5); }
      50% { box-shadow: 0 0 20px rgba(0, 255, 136, 0.8); }
    }

    .field-card-icon { font-size: 1.1em; line-height: 1; }
    .field-card-name { font-size: 0.45em; line-height: 1; }
    .field-card-hp {
      position: absolute;
      bottom: 2px; right: 2px;
      background: #27ae60;
      color: #fff;
      padding: 1px 3px;
      border-radius: 4px;
      font-size: 0.5em;
      font-weight: bold;
    }
    .field-card-atk {
      position: absolute;
      bottom: 2px; left: 2px;
      background: #e74c3c;
      color: #fff;
      padding: 1px 3px;
      border-radius: 4px;
      font-size: 0.5em;
      font-weight: bold;
    }

    /* ë°°í‹€ ë¡œê·¸ */
    .battle-log {
      background: rgba(0,0,0,0.4);
      border-radius: 4px;
      padding: 2px 6px;
      overflow-y: auto;
      font-size: 0.6em;
      flex-shrink: 0;
      flex: 0.3;
      min-height: 20px;
    }

    .log-entry { padding: 3px 0; color: #aaa; }
    .log-entry.damage { color: #e74c3c; }
    .log-entry.heal { color: #27ae60; }
    .log-entry.info { color: #00d9ff; }

    /* í•¸ë“œ */
    .hand-section {
      padding: 2px 5px;
      background: rgba(0, 217, 255, 0.1);
      border-radius: 6px;
      border: 1px solid rgba(0, 217, 255, 0.3);
      flex: 1.5;
      min-height: 0;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .hand-label { font-size: 0.6em; color: #888; flex-shrink: 0; }
    .hand-label .mobile-hint { display: none; }
    @media (max-width: 768px) {
      .hand-label .desktop-hint { display: none; }
      .hand-label .mobile-hint { display: inline; }
    }

    .hand {
      display: flex;
      gap: 4px;
      overflow-x: auto;
      overflow-y: hidden;
      flex: 1;
      align-items: center;
      min-height: 0;
    }

    .hand-card {
      min-width: 55px;
      height: 90%;
      max-height: 70px;
      background: linear-gradient(145deg, #3a3a5a, #2a2a4a);
      border-radius: 5px;
      padding: 2px;
      cursor: grab;
      transition: all 0.2s;
      border: 2px solid transparent;
      position: relative;
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .hand-card:hover {
      border-color: #00d9ff;
    }

    .hand-card.dragging {
      opacity: 0.5;
      cursor: grabbing;
    }

    .hand-card.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .hand-card.disabled:hover {
      transform: none;
      border-color: transparent;
    }

    .hand-card.selected {
      transform: translateY(-20px);
      border-color: #00ff88;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.6);
    }

    .hand-card-cost {
      position: absolute;
      top: -2px; right: -2px;
      background: #00d9ff;
      color: #000;
      width: 14px; height: 14px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.55em;
    }

    .hand-card.disabled .hand-card-cost { background: #666; }

    .hand-card-icon { font-size: 1.1em; text-align: center; line-height: 1; }
    .hand-card-name { font-size: 0.5em; text-align: center; font-weight: bold; line-height: 1; }
    .hand-card-stats { 
      display: flex; 
      justify-content: space-around; 
      font-size: 0.45em; 
    }

    /* ë“œë˜ê·¸ ê³ ìŠ¤íŠ¸ */
    .drag-ghost {
      position: fixed;
      pointer-events: none;
      z-index: 9999;
      opacity: 0.9;
      transform: rotate(5deg) scale(1.1);
    }

    /* ê²Œì„ ì»¨íŠ¸ë¡¤ */
    .game-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      padding: 2px;
      flex-shrink: 0;
    }

    .game-btn {
      padding: 4px 12px;
      border: none;
      border-radius: 12px;
      font-weight: bold;
      cursor: pointer;
      font-size: 0.7em;
    }

    .game-btn.primary {
      background: linear-gradient(90deg, #00d9ff, #00ff88);
      color: #000;
    }

    .game-btn.secondary {
      background: rgba(255,255,255,0.1);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .game-btn.danger {
      background: linear-gradient(90deg, #e74c3c, #c0392b);
      color: #fff;
    }

    .game-btn:hover { transform: scale(1.05); }
    .game-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

    /* ê²Œì„ ì‹œì‘ í™”ë©´ */
    .game-start {
      text-align: center;
      padding: 50px 20px;
    }

    .game-start h2 { font-size: 2em; margin-bottom: 20px; }
    .game-start p { color: #888; margin-bottom: 30px; max-width: 500px; margin-left: auto; margin-right: auto; }

    .difficulty-select {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-bottom: 30px;
    }

    .difficulty-btn {
      padding: 20px 30px;
      background: rgba(255,255,255,0.05);
      border: 2px solid rgba(255,255,255,0.1);
      border-radius: 15px;
      color: #fff;
      cursor: pointer;
      transition: all 0.3s;
    }

    .difficulty-btn:hover {
      border-color: #00d9ff;
      background: rgba(0, 217, 255, 0.1);
    }

    .difficulty-btn h3 { margin-bottom: 5px; }
    .difficulty-btn p { font-size: 0.85em; color: #888; }

    /* ê²Œì„ ì˜¤ë²„ ëª¨ë‹¬ */
    .game-over-modal {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.9);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .game-over-modal.active { display: flex; }

    .game-over-content {
      text-align: center;
      padding: 50px;
    }

    .game-over-content h2 { font-size: 3em; margin-bottom: 20px; }
    .game-over-content.win h2 { color: #00ff88; }
    .game-over-content.lose h2 { color: #e74c3c; }
    .game-over-content p { color: #888; margin-bottom: 30px; font-size: 1.2em; }

    /* ë°˜ì‘í˜• */
    @media (max-width: 900px) {
      .game-wrapper { flex-direction: column; }
      .card-info-panel { display: none; } /* ëª¨ë°”ì¼ì—ì„œ ìˆ¨ê¹€ */
    }

    @media (max-height: 500px) {
      .battle-log { display: none; }
      .hand { height: 80px; }
      .hand-card { min-width: 65px; height: 75px; }
      .hand-card-icon { font-size: 1.3em; }
    }

    /* ê°€ë¡œëª¨ë“œ ìœ ë„ ì˜¤ë²„ë ˆì´ */
    .rotate-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: #1a1a2e;
      z-index: 9999;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
    }
    .rotate-overlay .rotate-icon {
      font-size: 4em;
      margin-bottom: 20px;
      animation: rotateHint 2s infinite;
    }
    @keyframes rotateHint {
      0%, 100% { transform: rotate(0deg); }
      50% { transform: rotate(90deg); }
    }
    .rotate-overlay p { color: #888; font-size: 1.2em; }

    @media (max-width: 768px) and (orientation: portrait) {
      .rotate-overlay { display: flex; }
    }
  </style>
</head>
<body>
  <!-- ê°€ë¡œëª¨ë“œ ìœ ë„ ì˜¤ë²„ë ˆì´ -->
  <div class="rotate-overlay">
    <div class="rotate-icon">ğŸ“±</div>
    <h2 style="color: #00d9ff; margin-bottom: 10px;">ê°€ë¡œë¡œ ëŒë ¤ì£¼ì„¸ìš”!</h2>
    <p>ë” ë‚˜ì€ ê²Œì„ ê²½í—˜ì„ ìœ„í•´<br>ê¸°ê¸°ë¥¼ ê°€ë¡œë¡œ íšŒì „í•´ì£¼ì„¸ìš”</p>
  </div>
  <div class="container">
    <header>
      <h1>ğŸƒ ì„œë²„ ë””íœìŠ¤</h1>
      <p class="subtitle">ì¸í”„ë¼ ì¹´ë“œê²Œì„ìœ¼ë¡œ ë°°ìš°ëŠ” í´ë¼ìš°ë“œ ì•„í‚¤í…ì²˜</p>
    </header>

    <div class="tabs">
      <button class="tab-btn active" data-tab="collection">ğŸ“š ì¹´ë“œ ë„ê°</button>
      <button class="tab-btn" data-tab="game">ğŸ® ê²Œì„í•˜ê¸°</button>
    </div>

    <!-- ì¹´ë“œ ë„ê° -->
    <div id="collection" class="tab-content active">
      <div class="filters">
        <button class="filter-btn active" data-filter="all">ì „ì²´</button>
        <button class="filter-btn" data-filter="computing">ğŸ–¥ï¸ ì»´í“¨íŒ…</button>
        <button class="filter-btn" data-filter="storage">ğŸ’¾ ìŠ¤í† ë¦¬ì§€</button>
        <button class="filter-btn" data-filter="database">ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤</button>
        <button class="filter-btn" data-filter="network">ğŸŒ ë„¤íŠ¸ì›Œí¬</button>
        <button class="filter-btn" data-filter="security">ğŸ”’ ë³´ì•ˆ</button>
        <button class="filter-btn" data-filter="devops">âš™ï¸ DevOps</button>
        <button class="filter-btn" data-filter="monitoring">ğŸ“Š ëª¨ë‹ˆí„°ë§</button>
        <button class="filter-btn" data-filter="attack">ğŸ’¥ ê³µê²©</button>
      </div>
      <div class="card-grid" id="cardGrid"></div>
    </div>

    <!-- ê²Œì„ í™”ë©´ -->
    <div id="game" class="tab-content">
      <div class="game-start" id="gameStart">
        <h2>ğŸš€ ì„œë²„ë¥¼ ì§€ì¼œë¼!</h2>
        <p>ì¸í”„ë¼ ì¹´ë“œë¡œ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê³ , ìƒëŒ€ì˜ ê³µê²©ìœ¼ë¡œë¶€í„° ë°©ì–´í•˜ì„¸ìš”. ìƒëŒ€ ì„œë²„ì˜ HPë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ë©´ ìŠ¹ë¦¬!</p>
        <p style="color: #00d9ff; margin-top: -20px; margin-bottom: 30px;">ğŸ’¡ ì¹´ë“œë¥¼ ë“œë˜ê·¸í•´ì„œ í•„ë“œì— ë†“ìœ¼ì„¸ìš”!</p>
        
        <div class="difficulty-select">
          <div class="difficulty-btn" onclick="startGame('easy')">
            <h3>ğŸŸ¢ ì‰¬ì›€</h3>
            <p>ì…ë¬¸ììš©</p>
          </div>
          <div class="difficulty-btn" onclick="startGame('normal')">
            <h3>ğŸŸ¡ ë³´í†µ</h3>
            <p>ê¸°ë³¸ ë‚œì´ë„</p>
          </div>
          <div class="difficulty-btn" onclick="startGame('hard')">
            <h3>ğŸ”´ ì–´ë ¤ì›€</h3>
            <p>ë„ì „!</p>
          </div>
        </div>
      </div>

      <div class="game-wrapper" id="gameWrapper">
        <div class="game-main">
          <div class="game-header">
            <div class="turn-indicator" id="turnIndicator">ë‚´ í„´</div>
            <div class="mana-display">
              <span>âš¡</span>
              <div class="mana-orbs" id="manaOrbs"></div>
              <span id="manaText">0/0</span>
            </div>
            <button class="game-btn secondary" onclick="showHelp()">â“ ë„ì›€ë§</button>
          </div>

          <!-- ìƒëŒ€ ì˜ì—­ -->
          <div class="player-section enemy" id="enemySection">
            <div class="section-header">
              <span class="player-name enemy">ğŸ¤– DDoS ë´‡</span>
              <div class="health-bar">
                <div class="health-bar-bg">
                  <div class="health-bar-fill" id="enemyHpBar" style="width: 100%"></div>
                </div>
                <span class="health-text" id="enemyHpText">100/100</span>
              </div>
            </div>
            <div class="field" id="enemyField"></div>
          </div>

          <!-- ë°°í‹€ ë¡œê·¸ -->
          <div class="battle-log" id="battleLog">
            <div class="log-entry info">ê²Œì„ ì‹œì‘! ì¹´ë“œë¥¼ ë“œë˜ê·¸í•´ì„œ í•„ë“œì— ë†“ìœ¼ì„¸ìš”.</div>
          </div>

          <!-- ë‚´ ì˜ì—­ -->
          <div class="player-section player" id="playerSection">
            <div class="section-header">
              <span class="player-name player">ğŸ§‘â€ğŸ’» ë‚˜</span>
              <div class="health-bar">
                <div class="health-bar-bg">
                  <div class="health-bar-fill" id="playerHpBar" style="width: 100%"></div>
                </div>
                <span class="health-text" id="playerHpText">100/100</span>
              </div>
            </div>
            <div class="field" id="playerField"></div>
          </div>

          <!-- í•¸ë“œ -->
          <div class="hand-section">
            <div class="hand-label">ğŸ´ ë‚´ íŒ¨ <span class="desktop-hint">(ë“œë˜ê·¸ ë˜ëŠ” í´ë¦­í•´ì„œ ë°°ì¹˜ | í˜¸ë²„í•˜ë©´ ì„¤ëª…)</span><span class="mobile-hint">(íƒ­í•´ì„œ ì„ íƒ â†’ í•„ë“œ íƒ­í•´ì„œ ë°°ì¹˜)</span></div>
            <div class="hand" id="playerHand"></div>
          </div>

          <!-- ì»¨íŠ¸ë¡¤ -->
          <div class="game-controls">
            <button class="game-btn primary" id="endTurnBtn" onclick="endTurn()">í„´ ì¢…ë£Œ â¡ï¸</button>
            <button class="game-btn danger" onclick="surrenderGame()">ğŸ³ï¸ ê¸°ê¶Œ</button>
          </div>
        </div>

        <!-- ì¹´ë“œ ì •ë³´ íŒ¨ë„ -->
        <div class="card-info-panel" id="cardInfoPanel">
          <div class="empty-info">ì¹´ë“œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´<br>ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ì¹´ë“œ ìƒì„¸ ëª¨ë‹¬ (ë„ê°ìš©) -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <button class="close-btn" onclick="closeModal()">âœ•</button>
      <div class="modal-header">
        <div class="modal-icon" id="modalIcon"></div>
        <div class="modal-name" id="modalName"></div>
        <div class="modal-category" id="modalCategory"></div>
      </div>
      <div class="modal-body">
        <div class="modal-stats" id="modalStats"></div>
        <div class="modal-section">
          <h3>ğŸ“‹ ì„¤ëª…</h3>
          <p id="modalDesc"></p>
        </div>
        <div class="modal-section">
          <h3>ğŸ® ê²Œì„ íš¨ê³¼</h3>
          <p id="modalEffect"></p>
        </div>
        <div class="modal-section">
          <h3>â˜ï¸ ì‹¤ì œ ì„œë¹„ìŠ¤</h3>
          <div class="services-list" id="modalServices"></div>
        </div>
        <div class="modal-section">
          <h3>ğŸ’¡ ì‹¤ì „ íŒ</h3>
          <div class="tip-box" id="modalTip"></div>
        </div>
        <div class="modal-section">
          <h3>ğŸ”— ì‹œë„ˆì§€ ì¹´ë“œ</h3>
          <div class="services-list" id="modalSynergy"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ê²Œì„ ì˜¤ë²„ ëª¨ë‹¬ -->
  <div class="game-over-modal" id="gameOverModal">
    <div class="game-over-content" id="gameOverContent">
      <h2 id="gameOverTitle">ìŠ¹ë¦¬!</h2>
      <p id="gameOverMsg">ìƒëŒ€ ì„œë²„ë¥¼ ë‹¤ìš´ì‹œì¼°ìŠµë‹ˆë‹¤!</p>
      <button class="game-btn primary" onclick="restartGame()">ë‹¤ì‹œ í•˜ê¸°</button>
      <button class="game-btn secondary" onclick="backToMenu()" style="margin-left: 10px;">ë©”ë‰´ë¡œ</button>
    </div>
  </div>

  <script>
    // ============ ì¹´ë“œ ë°ì´í„° ============
    const allCards = [
      // ì»´í“¨íŒ…
      { id: 'ec2', name: 'EC2', icon: 'ğŸ–¥ï¸', category: 'computing', categoryName: 'ì»´í“¨íŒ…', cost: 3, hp: 100, attack: 20,
        description: 'ê°€ìƒ ì„œë²„(Virtual Machine)ì…ë‹ˆë‹¤. í´ë¼ìš°ë“œì—ì„œ ê°€ì¥ ê¸°ë³¸ì ì¸ ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ë¡œ, ì›í•˜ëŠ” OSì™€ ì‚¬ì–‘ìœ¼ë¡œ ì„œë²„ë¥¼ ë¹Œë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        effect: 'ê¸°ë³¸ ì„œë²„ ì¹´ë“œ. HP 100ìœ¼ë¡œ ì•ˆì •ì ì¸ ë°©ì–´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.',
        services: [{ name: 'AWS EC2', provider: 'aws' }, { name: 'GCP Compute Engine', provider: 'gcp' }, { name: 'Azure VM', provider: 'azure' }],
        tip: 'ì˜ˆì•½ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë¹„ìš©ì„ ìµœëŒ€ 72% ì ˆê°í•  ìˆ˜ ìˆì–´ìš”.', synergy: ['Load Balancer', 'Auto Scaling', 'EBS'] },
      { id: 'lambda', name: 'Lambda', icon: 'Î»', category: 'computing', categoryName: 'ì»´í“¨íŒ…', cost: 2, hp: 30, attack: 40,
        description: 'ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ì…ë‹ˆë‹¤. ì„œë²„ ê´€ë¦¬ ì—†ì´ ì½”ë“œë§Œ ì˜¬ë¦¬ë©´ ìë™ìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì‚¬ìš©í•œ ë§Œí¼ë§Œ ë¹„ìš©ì„ ì§€ë¶ˆí•©ë‹ˆë‹¤.',
        effect: 'HPëŠ” ë‚®ì§€ë§Œ ê³µê²©ë ¥ì´ ë†’ìŠµë‹ˆë‹¤. ë¹ ë¥¸ ê³µê²©ì— ìœ ë¦¬.',
        services: [{ name: 'AWS Lambda', provider: 'aws' }, { name: 'GCP Cloud Functions', provider: 'gcp' }],
        tip: 'ì½œë“œ ìŠ¤íƒ€íŠ¸ ì§€ì—°ì´ ìˆì„ ìˆ˜ ìˆì–´ìš”. ì§§ì€ ì‹¤í–‰ ì‹œê°„ì˜ ì´ë²¤íŠ¸ ê¸°ë°˜ ì‘ì—…ì— ìµœì ì…ë‹ˆë‹¤.', synergy: ['API Gateway', 'DynamoDB', 'S3'] },
      { id: 'kubernetes', name: 'Kubernetes', icon: 'â˜¸ï¸', category: 'computing', categoryName: 'ì»´í“¨íŒ…', cost: 5, hp: 150, attack: 30,
        description: 'ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í”Œë«í¼ì…ë‹ˆë‹¤. ìˆ˜ë°± ê°œì˜ ì»¨í…Œì´ë„ˆë¥¼ ìë™ìœ¼ë¡œ ë°°í¬, í™•ì¥, ê´€ë¦¬í•©ë‹ˆë‹¤.',
        effect: 'ë†’ì€ HP. Container ì¹´ë“œê°€ ìˆìœ¼ë©´ íŒŒê´´ ì‹œ 50% í™•ë¥ ë¡œ ë¶€í™œ.',
        services: [{ name: 'AWS EKS', provider: 'aws' }, { name: 'GCP GKE', provider: 'gcp' }, { name: 'Azure AKS', provider: 'azure' }],
        tip: 'í•™ìŠµ ê³¡ì„ ì´ ê°€íŒŒë¥´ì§€ë§Œ, ëŒ€ê·œëª¨ ì„œë¹„ìŠ¤ ìš´ì˜ì˜ í‘œì¤€ì…ë‹ˆë‹¤.', synergy: ['Container', 'Prometheus', 'Service Mesh'] },

      // ë°ì´í„°ë² ì´ìŠ¤
      { id: 'rds', name: 'RDS', icon: 'ğŸ—„ï¸', category: 'database', categoryName: 'ë°ì´í„°ë² ì´ìŠ¤', cost: 4, hp: 120, attack: 15,
        description: 'ê´€ë¦¬í˜• ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤. MySQL, PostgreSQL ë“±ì„ ì‰½ê²Œ ìš´ì˜í•  ìˆ˜ ìˆê³ , ë°±ì—…/íŒ¨ì¹˜ê°€ ìë™í™”ë©ë‹ˆë‹¤.',
        effect: 'ë†’ì€ HPë¡œ ì•ˆì •ì . ë°ì´í„° ì§€ì†ì„± ë¶€ì—¬.',
        services: [{ name: 'AWS RDS', provider: 'aws' }, { name: 'GCP Cloud SQL', provider: 'gcp' }],
        tip: 'Multi-AZ ë°°í¬ë¡œ ê³ ê°€ìš©ì„±ì„ í™•ë³´í•˜ì„¸ìš”. Read Replicaë¡œ ì½ê¸° ì„±ëŠ¥ì„ ë†’ì¼ ìˆ˜ ìˆì–´ìš”.', synergy: ['Redis', 'Backup', 'Read Replica'] },
      { id: 'redis', name: 'Redis', icon: 'âš¡', category: 'database', categoryName: 'ë°ì´í„°ë² ì´ìŠ¤', cost: 3, hp: 50, attack: 35,
        description: 'ì¸ë©”ëª¨ë¦¬ ìºì‹œ/ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤. ë””ìŠ¤í¬ê°€ ì•„ë‹Œ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ì„œ ë§¤ìš° ë¹ ë¦…ë‹ˆë‹¤.',
        effect: 'DB ì¹´ë“œ ì•ì— ë°°ì¹˜í•˜ë©´ DBê°€ ë°›ëŠ” ë°ë¯¸ì§€ 30% ê°ì†Œ.',
        services: [{ name: 'AWS ElastiCache', provider: 'aws' }, { name: 'GCP Memorystore', provider: 'gcp' }],
        tip: 'ìºì‹œ ì „ëµ(Cache-Aside, Write-Through)ì„ ì´í•´í•˜ë©´ íš¨ê³¼ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆì–´ìš”.', synergy: ['RDS', 'API Gateway', 'Session'] },
      { id: 'dynamodb', name: 'DynamoDB', icon: 'ğŸ”¥', category: 'database', categoryName: 'ë°ì´í„°ë² ì´ìŠ¤', cost: 3, hp: 80, attack: 25,
        description: 'NoSQL ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤. ìŠ¤í‚¤ë§ˆ ì—†ì´ ìœ ì—°í•˜ê²Œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³ , ìë™ í™•ì¥ë©ë‹ˆë‹¤.',
        effect: 'Lambdaì™€ ì‹œë„ˆì§€ ì‹œ ê³µê²©ë ¥ 2ë°°.',
        services: [{ name: 'AWS DynamoDB', provider: 'aws' }, { name: 'GCP Firestore', provider: 'gcp' }],
        tip: 'íŒŒí‹°ì…˜ í‚¤ ì„¤ê³„ê°€ í•µì‹¬! í•« íŒŒí‹°ì…˜ì„ í”¼í•˜ë„ë¡ í‚¤ë¥¼ ë¶„ì‚°í•˜ì„¸ìš”.', synergy: ['Lambda', 'API Gateway', 'Stream'] },

      // ë„¤íŠ¸ì›Œí¬
      { id: 'lb', name: 'Load Balancer', icon: 'âš–ï¸', category: 'network', categoryName: 'ë„¤íŠ¸ì›Œí¬', cost: 3, hp: 70, attack: 10,
        description: 'íŠ¸ë˜í”½ ë¶„ì‚°ê¸°ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ì„œë²„ì— ìš”ì²­ì„ ê³¨ê³ ë£¨ ë‚˜ëˆ ì„œ ë¶€í•˜ ì§‘ì¤‘ì„ ë°©ì§€í•©ë‹ˆë‹¤.',
        effect: 'ì„œë²„ ì¹´ë“œ 2ê°œ ì´ìƒ ìˆì„ ë•Œ, ë°›ëŠ” ë°ë¯¸ì§€ë¥¼ ë¶„ì‚°.',
        services: [{ name: 'AWS ALB/NLB', provider: 'aws' }, { name: 'GCP Load Balancer', provider: 'gcp' }],
        tip: 'ALBëŠ” HTTP ë ˆë²¨, NLBëŠ” TCP ë ˆë²¨. ì›¹ì„œë¹„ìŠ¤ëŠ” ë³´í†µ ALBë¥¼ ì‚¬ìš©í•´ìš”.', synergy: ['EC2', 'Auto Scaling', 'Health Check'] },
      { id: 'cdn', name: 'CDN', icon: 'ğŸŒ', category: 'network', categoryName: 'ë„¤íŠ¸ì›Œí¬', cost: 2, hp: 40, attack: 0,
        description: 'ì½˜í…ì¸  ì „ì†¡ ë„¤íŠ¸ì›Œí¬ì…ë‹ˆë‹¤. ì „ ì„¸ê³„ ì—£ì§€ ì„œë²„ì— ì½˜í…ì¸ ë¥¼ ìºì‹±í•©ë‹ˆë‹¤.',
        effect: 'ê³µê²©ë ¥ ì—†ìŒ. íŠ¸ë˜í”½ ìŠ¤íŒŒì´í¬ ê³µê²© ë¬´íš¨í™”.',
        services: [{ name: 'AWS CloudFront', provider: 'aws' }, { name: 'Cloudflare', provider: 'azure' }],
        tip: 'ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ë¼ë©´ í•„ìˆ˜! TTL ì„¤ì •ìœ¼ë¡œ ìºì‹œ ê°±ì‹  ì£¼ê¸°ë¥¼ ì¡°ì ˆí•˜ì„¸ìš”.', synergy: ['S3', 'WAF', 'SSL/TLS'] },
      { id: 'apigateway', name: 'API Gateway', icon: 'ğŸšª', category: 'network', categoryName: 'ë„¤íŠ¸ì›Œí¬', cost: 2, hp: 50, attack: 15,
        description: 'API ê´€ë¬¸ì…ë‹ˆë‹¤. ì¸ì¦, ì†ë„ ì œí•œ, ë¼ìš°íŒ… ë“± API ìš”ì²­ì„ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•©ë‹ˆë‹¤.',
        effect: 'Rate Limit íš¨ê³¼ ë‚´ì¥. ìƒëŒ€ ê³µê²© íšŸìˆ˜ 1íšŒ ì œí•œ.',
        services: [{ name: 'AWS API Gateway', provider: 'aws' }, { name: 'Kong', provider: 'gcp' }],
        tip: 'Lambdaì™€ ì¡°í•©í•˜ë©´ ì„œë²„ë¦¬ìŠ¤ APIë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”.', synergy: ['Lambda', 'Auth', 'Rate Limit'] },

      // ë³´ì•ˆ
      { id: 'waf', name: 'WAF', icon: 'ğŸ›¡ï¸', category: 'security', categoryName: 'ë³´ì•ˆ', cost: 3, hp: 60, attack: 0,
        description: 'ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°©í™”ë²½ì…ë‹ˆë‹¤. SQL Injection, XSS ë“± ì›¹ ê³µê²©ì„ ì°¨ë‹¨í•©ë‹ˆë‹¤.',
        effect: 'SQL Injection ê³µê²© ì™„ì „ ë¬´íš¨í™”.',
        services: [{ name: 'AWS WAF', provider: 'aws' }, { name: 'GCP Cloud Armor', provider: 'gcp' }],
        tip: 'OWASP Top 10 ê·œì¹™ì„ ê¸°ë³¸ìœ¼ë¡œ ì ìš©í•˜ì„¸ìš”.', synergy: ['CDN', 'Load Balancer', 'Firewall'] },
      { id: 'iam', name: 'IAM', icon: 'ğŸ”‘', category: 'security', categoryName: 'ë³´ì•ˆ', cost: 1, hp: 30, attack: 0,
        description: 'ì ‘ê·¼ ê¶Œí•œ ê´€ë¦¬ì…ë‹ˆë‹¤. ëˆ„ê°€ ì–´ë–¤ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ ì œì–´í•©ë‹ˆë‹¤.',
        effect: 'ë‚´ë¶€ì ê³µê²© ë°ë¯¸ì§€ 70% ê°ì†Œ.',
        services: [{ name: 'AWS IAM', provider: 'aws' }, { name: 'GCP IAM', provider: 'gcp' }],
        tip: 'ìµœì†Œ ê¶Œí•œ ì›ì¹™! í•„ìš”í•œ ê¶Œí•œë§Œ ë¶€ì—¬í•˜ì„¸ìš”.', synergy: ['Secrets Manager', 'Audit', 'MFA'] },
      { id: 'ssl', name: 'SSL/TLS', icon: 'ğŸ”', category: 'security', categoryName: 'ë³´ì•ˆ', cost: 1, hp: 20, attack: 0,
        description: 'ì•”í˜¸í™” í†µì‹ ì…ë‹ˆë‹¤. HTTPSì˜ í•µì‹¬.',
        effect: 'ëª¨ë“  ì•„êµ° ì¹´ë“œ ë°›ëŠ” ë°ë¯¸ì§€ -5.',
        services: [{ name: 'AWS ACM', provider: 'aws' }, { name: "Let's Encrypt", provider: 'gcp' }],
        tip: 'ACMìœ¼ë¡œ ë¬´ë£Œ SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆì–´ìš”.', synergy: ['Load Balancer', 'CDN', 'API Gateway'] },

      // DevOps
      { id: 'cicd', name: 'CI/CD', icon: 'ğŸ”„', category: 'devops', categoryName: 'DevOps', cost: 2, hp: 40, attack: 20,
        description: 'ì§€ì†ì  í†µí•©/ë°°í¬ì…ë‹ˆë‹¤. ì½”ë“œ ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê³  ë°°í¬í•©ë‹ˆë‹¤.',
        effect: 'ë§¤í„´ ì‹œì‘ ì‹œ ì¹´ë“œ 1ì¥ ì¶”ê°€ ë“œë¡œìš°.',
        services: [{ name: 'GitHub Actions', provider: 'aws' }, { name: 'GitLab CI', provider: 'gcp' }],
        tip: 'ì‘ì€ ë³€ê²½ì„ ìì£¼ ë°°í¬í•˜ì„¸ìš”.', synergy: ['Docker', 'Kubernetes', 'Test'] },
      { id: 'docker', name: 'Docker', icon: 'ğŸ³', category: 'devops', categoryName: 'DevOps', cost: 1, hp: 30, attack: 10,
        description: 'ì»¨í…Œì´ë„ˆ í”Œë«í¼ì…ë‹ˆë‹¤. ì•±ê³¼ ì˜ì¡´ì„±ì„ í•˜ë‚˜ë¡œ íŒ¨í‚¤ì§•í•©ë‹ˆë‹¤.',
        effect: 'ë‚®ì€ ì½”ìŠ¤íŠ¸ë¡œ ë¹ ë¥¸ ë°°ì¹˜ ê°€ëŠ¥.',
        services: [{ name: 'Docker', provider: 'aws' }, { name: 'Podman', provider: 'gcp' }],
        tip: 'Alpine ë² ì´ìŠ¤ ì´ë¯¸ì§€ë¡œ í¬ê¸°ë¥¼ ì¤„ì´ì„¸ìš”!', synergy: ['Kubernetes', 'CI/CD', 'Registry'] },
      { id: 'terraform', name: 'Terraform', icon: 'ğŸ—ï¸', category: 'devops', categoryName: 'DevOps', cost: 2, hp: 30, attack: 15,
        description: 'Infrastructure as Code ë„êµ¬ì…ë‹ˆë‹¤. ì¸í”„ë¼ë¥¼ ì½”ë“œë¡œ ì •ì˜í•©ë‹ˆë‹¤.',
        effect: 'íŒŒê´´ëœ ì¸í”„ë¼ ì¹´ë“œë¥¼ 2í„´ í›„ ì¬ìƒì„±.',
        services: [{ name: 'Terraform', provider: 'aws' }, { name: 'Pulumi', provider: 'gcp' }],
        tip: 'ìƒíƒœ íŒŒì¼(tfstate) ê´€ë¦¬ê°€ ì¤‘ìš”í•´ìš”.', synergy: ['Git', 'CI/CD', 'Module'] },

      // ëª¨ë‹ˆí„°ë§
      { id: 'prometheus', name: 'Prometheus', icon: 'ğŸ“ˆ', category: 'monitoring', categoryName: 'ëª¨ë‹ˆí„°ë§', cost: 2, hp: 40, attack: 0,
        description: 'ë©”íŠ¸ë¦­ ìˆ˜ì§‘/ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.',
        effect: 'ìƒëŒ€ë°© ë‹¤ìŒ ê³µê²© ì¹´ë“œë¥¼ ë¯¸ë¦¬ í™•ì¸.',
        services: [{ name: 'Prometheus', provider: 'aws' }, { name: 'Datadog', provider: 'gcp' }],
        tip: 'Grafanaì™€ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ì˜ˆìœ ëŒ€ì‹œë³´ë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´ìš”!', synergy: ['Grafana', 'Alert', 'Kubernetes'] },
      { id: 'logging', name: 'Log Aggregator', icon: 'ğŸ“‹', category: 'monitoring', categoryName: 'ëª¨ë‹ˆí„°ë§', cost: 2, hp: 35, attack: 0,
        description: 'ë¡œê·¸ ìˆ˜ì§‘/ë¶„ì„ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.',
        effect: 'ê°™ì€ ê³µê²©ì„ 2íšŒ ë°›ìœ¼ë©´ ë°ë¯¸ì§€ 50% ê°ì†Œ.',
        services: [{ name: 'ELK Stack', provider: 'aws' }, { name: 'Loki', provider: 'gcp' }],
        tip: 'êµ¬ì¡°í™”ëœ ë¡œê·¸(JSON)ë¥¼ ì‚¬ìš©í•˜ë©´ ê²€ìƒ‰ì´ í¸í•´ìš”.', synergy: ['Prometheus', 'Alert', 'Debug'] },

      // ìŠ¤í† ë¦¬ì§€
      { id: 's3', name: 'S3', icon: 'ğŸª£', category: 'storage', categoryName: 'ìŠ¤í† ë¦¬ì§€', cost: 2, hp: 80, attack: 0,
        description: 'ì˜¤ë¸Œì íŠ¸ ìŠ¤í† ë¦¬ì§€ì…ë‹ˆë‹¤. ëª¨ë“  ì¢…ë¥˜ì˜ íŒŒì¼ì„ ë¬´ì œí•œ ì €ì¥í•©ë‹ˆë‹¤.',
        effect: 'CDNê³¼ ì‹œë„ˆì§€ ì‹œ ì •ì  ê³µê²© ë¬´íš¨í™”.',
        services: [{ name: 'AWS S3', provider: 'aws' }, { name: 'GCP Cloud Storage', provider: 'gcp' }],
        tip: 'ë²„ì „ ê´€ë¦¬ë¥¼ ì¼œì„œ ì‹¤ìˆ˜ë¡œ ì‚­ì œí•´ë„ ë³µêµ¬í•˜ì„¸ìš”.', synergy: ['CDN', 'Lambda', 'Backup'] },

      // ê³µê²©
      { id: 'ddos', name: 'DDoS', icon: 'ğŸ’¥', category: 'attack', categoryName: 'ê³µê²©', cost: 3, hp: 0, attack: 50,
        description: 'ë¶„ì‚° ì„œë¹„ìŠ¤ ê±°ë¶€ ê³µê²©. ëŒ€ëŸ‰ì˜ íŠ¸ë˜í”½ìœ¼ë¡œ ì„œë²„ë¥¼ ë§ˆë¹„ì‹œí‚µë‹ˆë‹¤.',
        effect: 'ìƒëŒ€ ì„œë²„ì— 50 ë°ë¯¸ì§€.',
        services: [], tip: 'ë°©ì–´: AWS Shield, Rate Limiting', synergy: [] },
      { id: 'spike', name: 'íŠ¸ë˜í”½ ìŠ¤íŒŒì´í¬', icon: 'ğŸ“ˆ', category: 'attack', categoryName: 'ê³µê²©', cost: 2, hp: 0, attack: 30,
        description: 'ê°‘ì‘ìŠ¤ëŸ¬ìš´ íŠ¸ë˜í”½ í­ì¦.',
        effect: 'ìƒëŒ€ ì„œë²„ì— 30 ë°ë¯¸ì§€. CDNì— ë§‰í˜.',
        services: [], tip: 'ë°©ì–´: Auto Scaling, CDN', synergy: [] },
      { id: 'sqli', name: 'SQL Injection', icon: 'ğŸ’‰', category: 'attack', categoryName: 'ê³µê²©', cost: 4, hp: 0, attack: 80,
        description: 'DB ì·¨ì•½ì ì„ ë…¸ë¦° ê³µê²©.',
        effect: 'DB ì¹´ë“œê°€ ìˆìœ¼ë©´ 80, ì—†ìœ¼ë©´ 20 ë°ë¯¸ì§€. WAFì— ë§‰í˜.',
        services: [], tip: 'ë°©ì–´: WAF, Prepared Statement', synergy: [] },
      { id: 'memleak', name: 'ë©”ëª¨ë¦¬ ëˆ„ìˆ˜', icon: 'ğŸ•³ï¸', category: 'attack', categoryName: 'ê³µê²©', cost: 2, hp: 0, attack: 15,
        description: 'ë¦¬ì†ŒìŠ¤ ê³ ê°ˆ ê³µê²©.',
        effect: '3í„´ ë™ì•ˆ ë§¤í„´ 15 ë°ë¯¸ì§€.',
        services: [], tip: 'ë°©ì–´: ëª¨ë‹ˆí„°ë§, ìë™ ì¬ì‹œì‘', synergy: [] },
    ];

    // ============ ê²Œì„ ìƒíƒœ ============
    let gameState = {
      started: false,
      turn: 'player',
      turnCount: 1,
      maxMana: 1,
      currentMana: 1,
      difficulty: 'normal',
      player: { hp: 100, maxHp: 100, field: [], hand: [], deck: [] },
      enemy: { hp: 100, maxHp: 100, field: [], deck: [] },
      selectedCard: null,
      memLeakTurns: 0,
      lastEnemyAttack: null
    };

    let draggedCard = null;
    let draggedIndex = null;
    let hoveredCard = null;
    let selectedHandIndex = null; // ëª¨ë°”ì¼ìš© ì„ íƒëœ ì¹´ë“œ
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 768;

    // ============ DOM ============
    const cardGrid = document.getElementById('cardGrid');
    const modalOverlay = document.getElementById('modalOverlay');
    const gameStart = document.getElementById('gameStart');
    const gameWrapper = document.getElementById('gameWrapper');
    const playerHand = document.getElementById('playerHand');
    const playerField = document.getElementById('playerField');
    const enemyField = document.getElementById('enemyField');
    const battleLog = document.getElementById('battleLog');
    const cardInfoPanel = document.getElementById('cardInfoPanel');
    const playerSection = document.getElementById('playerSection');

    // ============ ì¹´ë“œ ë„ê° ============
    function renderCards(filter = 'all') {
      const filtered = filter === 'all' ? allCards : allCards.filter(c => c.category === filter);
      cardGrid.innerHTML = filtered.map(card => `
        <div class="card ${card.category}" onclick="openModal('${card.id}')">
          <div class="card-icon">${card.icon}</div>
          <div class="card-name">${card.name}</div>
          <div class="card-type">${card.categoryName}</div>
          <div class="card-stats">
            <div class="stat"><div class="stat-value">${card.cost}</div><div class="stat-label">ì½”ìŠ¤íŠ¸</div></div>
            <div class="stat"><div class="stat-value">${card.hp}</div><div class="stat-label">HP</div></div>
            <div class="stat"><div class="stat-value">${card.attack}</div><div class="stat-label">ATK</div></div>
          </div>
        </div>
      `).join('');
    }

    function openModal(cardId) {
      const card = allCards.find(c => c.id === cardId);
      if (!card) return;
      document.getElementById('modalIcon').textContent = card.icon;
      document.getElementById('modalName').textContent = card.name;
      document.getElementById('modalCategory').textContent = card.categoryName;
      document.getElementById('modalStats').innerHTML = `
        <div class="modal-stat"><div class="modal-stat-value">${card.cost}</div><div class="modal-stat-label">ì½”ìŠ¤íŠ¸</div></div>
        <div class="modal-stat"><div class="modal-stat-value">${card.hp}</div><div class="modal-stat-label">HP</div></div>
        <div class="modal-stat"><div class="modal-stat-value">${card.attack}</div><div class="modal-stat-label">ê³µê²©ë ¥</div></div>
      `;
      document.getElementById('modalDesc').textContent = card.description;
      document.getElementById('modalEffect').textContent = card.effect;
      document.getElementById('modalServices').innerHTML = card.services.map(s => `<span class="service-tag ${s.provider}">${s.name}</span>`).join('');
      document.getElementById('modalTip').innerHTML = `<strong>ğŸ’¡ Tip:</strong> ${card.tip}`;
      document.getElementById('modalSynergy').innerHTML = card.synergy.map(s => `<span class="service-tag">${s}</span>`).join('');
      modalOverlay.classList.add('active');
    }

    function closeModal() { modalOverlay.classList.remove('active'); }
    modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) closeModal(); });

    // ============ ì¹´ë“œ ì •ë³´ íŒ¨ë„ ============
    function showCardInfo(card) {
      if (!card) {
        cardInfoPanel.innerHTML = `<div class="empty-info">ì¹´ë“œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´<br>ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤</div>`;
        cardInfoPanel.classList.add('empty');
        return;
      }
      cardInfoPanel.classList.remove('empty');
      cardInfoPanel.innerHTML = `
        <div class="info-card-header">
          <div class="info-card-icon">${card.icon}</div>
          <div class="info-card-name">${card.name}</div>
          <div class="info-card-category">${card.categoryName}</div>
        </div>
        <div class="info-stats">
          <div class="info-stat"><div class="info-stat-value">${card.cost}</div><div class="info-stat-label">ì½”ìŠ¤íŠ¸</div></div>
          <div class="info-stat"><div class="info-stat-value">${card.hp}</div><div class="info-stat-label">HP</div></div>
          <div class="info-stat"><div class="info-stat-value">${card.attack}</div><div class="info-stat-label">ATK</div></div>
        </div>
        <div class="info-section">
          <h4>ğŸ“‹ ì„¤ëª…</h4>
          <p>${card.description}</p>
        </div>
        <div class="info-section">
          <h4>ğŸ® ê²Œì„ íš¨ê³¼</h4>
          <p>${card.effect}</p>
        </div>
        ${card.services.length > 0 ? `
        <div class="info-section">
          <h4>â˜ï¸ ì‹¤ì œ ì„œë¹„ìŠ¤</h4>
          <div class="info-services">${card.services.map(s => `<span class="info-service">${s.name}</span>`).join('')}</div>
        </div>
        ` : ''}
        <div class="info-section">
          <h4>ğŸ’¡ íŒ</h4>
          <p>${card.tip}</p>
        </div>
      `;
    }

    // ============ ê²Œì„ ë¡œì§ ============
    function startGame(difficulty) {
      gameState = {
        started: true,
        turn: 'player',
        turnCount: 1,
        maxMana: 1,
        currentMana: 1,
        difficulty: difficulty,
        player: { hp: 100, maxHp: 100, field: [], hand: [], deck: [] },
        enemy: { hp: difficulty === 'easy' ? 80 : difficulty === 'hard' ? 120 : 100, maxHp: difficulty === 'easy' ? 80 : difficulty === 'hard' ? 120 : 100, field: [], deck: [] },
        selectedCard: null,
        memLeakTurns: 0,
        lastEnemyAttack: null
      };

      const deckCards = allCards.filter(c => c.category !== 'attack');
      gameState.player.deck = shuffle([...deckCards, ...deckCards]).slice(0, 20);
      gameState.enemy.deck = shuffle([...allCards]).slice(0, 15);

      for (let i = 0; i < 4; i++) drawCard('player');

      gameStart.style.display = 'none';
      gameWrapper.classList.add('active');

      // ê²Œì„ ëª¨ë“œ: í—¤ë”, íƒ­ ìˆ¨ê¸°ê¸°
      document.querySelector('header').classList.add('hidden');
      document.querySelector('.tabs').classList.add('hidden');
      document.querySelector('.container').classList.add('game-mode');
      enableGameMode();
      window.scrollTo(0, 0);

      addLog('ê²Œì„ ì‹œì‘! ì¹´ë“œë¥¼ ë“œë˜ê·¸í•´ì„œ í•„ë“œì— ë†“ìœ¼ì„¸ìš”.', 'info');
      showCardInfo(null);
      updateUI();
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function drawCard(who) {
      const state = gameState[who];
      if (state.deck.length > 0 && state.hand.length < 7) {
        const card = { ...state.deck.pop(), uid: Date.now() + Math.random() };
        state.hand.push(card);
        return card;
      }
      return null;
    }

    function playCard(index) {
      if (gameState.turn !== 'player') return;
      const card = gameState.player.hand[index];
      if (!card || card.cost > gameState.currentMana) return;

      gameState.currentMana -= card.cost;

      if (card.category === 'attack') {
        useAttackCard(card);
      } else {
        gameState.player.field.push({ ...card, currentHp: card.hp, canAttack: false });
        addLog(`${card.icon} ${card.name} ë°°ì¹˜!`, 'info');
      }

      gameState.player.hand.splice(index, 1);
      updateUI();
    }

    function useAttackCard(card) {
      let damage = card.attack;
      let blocked = false;

      if (card.id === 'sqli' && gameState.enemy.field.some(c => c.id === 'waf')) {
        addLog(`ğŸ›¡ï¸ WAFê°€ SQL Injectionì„ ë§‰ì•˜ìŠµë‹ˆë‹¤!`, 'info');
        blocked = true;
      }
      if (card.id === 'spike' && gameState.enemy.field.some(c => c.id === 'cdn')) {
        addLog(`ğŸŒ CDNì´ íŠ¸ë˜í”½ ìŠ¤íŒŒì´í¬ë¥¼ í¡ìˆ˜í–ˆìŠµë‹ˆë‹¤!`, 'info');
        blocked = true;
      }

      if (!blocked) {
        if (card.id === 'sqli') {
          const hasDB = gameState.enemy.field.some(c => c.category === 'database');
          damage = hasDB ? 80 : 20;
        }
        if (card.id === 'memleak') {
          gameState.memLeakTurns = 3;
          addLog(`ğŸ•³ï¸ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜! 3í„´ê°„ ë§¤í„´ 15 ë°ë¯¸ì§€`, 'damage');
        } else {
          gameState.enemy.hp = Math.max(0, gameState.enemy.hp - damage);
          addLog(`${card.icon} ${card.name}! ${damage} ë°ë¯¸ì§€!`, 'damage');
        }
      }
      checkGameOver();
    }

    function attackWithFieldCard(fieldIndex) {
      if (gameState.turn !== 'player') return;
      const card = gameState.player.field[fieldIndex];
      if (!card || !card.canAttack) return;

      card.canAttack = false;

      if (gameState.enemy.field.length > 0) {
        const target = gameState.enemy.field[0];
        target.currentHp -= card.attack;
        addLog(`${card.icon} â†’ ${target.icon} ${card.attack} ë°ë¯¸ì§€!`, 'damage');
        if (target.currentHp <= 0) {
          gameState.enemy.field.shift();
          addLog(`${target.icon} ${target.name} íŒŒê´´!`, 'damage');
        }
      } else {
        gameState.enemy.hp = Math.max(0, gameState.enemy.hp - card.attack);
        addLog(`${card.icon} ì§ì ‘ ê³µê²©! ${card.attack} ë°ë¯¸ì§€!`, 'damage');
      }

      checkGameOver();
      updateUI();
    }

    function endTurn() {
      if (gameState.turn !== 'player') return;

      gameState.turn = 'enemy';
      document.getElementById('turnIndicator').textContent = 'ìƒëŒ€ í„´';
      document.getElementById('turnIndicator').classList.add('enemy');
      document.getElementById('endTurnBtn').disabled = true;

      if (gameState.memLeakTurns > 0) {
        gameState.enemy.hp = Math.max(0, gameState.enemy.hp - 15);
        gameState.memLeakTurns--;
        addLog(`ğŸ•³ï¸ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°ë¯¸ì§€! -15`, 'damage');
      }

      updateUI();
      setTimeout(() => { enemyTurn(); }, 1000);
    }

    function enemyTurn() {
      addLog('ğŸ¤– DDoS ë´‡ì˜ í„´...', 'info');

      const attacks = ['ddos', 'spike', 'sqli'];
      const attackId = attacks[Math.floor(Math.random() * attacks.length)];
      const attackCard = allCards.find(c => c.id === attackId);
      gameState.lastEnemyAttack = attackCard;

      setTimeout(() => {
        let damage = attackCard.attack;
        let blocked = false;

        if (attackCard.id === 'sqli' && gameState.player.field.some(c => c.id === 'waf')) {
          addLog(`ğŸ›¡ï¸ WAFê°€ SQL Injectionì„ ë§‰ì•˜ìŠµë‹ˆë‹¤!`, 'info');
          blocked = true;
        }
        if (attackCard.id === 'spike' && gameState.player.field.some(c => c.id === 'cdn')) {
          addLog(`ğŸŒ CDNì´ íŠ¸ë˜í”½ ìŠ¤íŒŒì´í¬ë¥¼ í¡ìˆ˜í–ˆìŠµë‹ˆë‹¤!`, 'info');
          blocked = true;
        }

        const hasSSL = gameState.player.field.some(c => c.id === 'ssl');
        if (hasSSL && !blocked) damage = Math.max(0, damage - 5);

        if (!blocked) {
          if (gameState.player.field.length > 0) {
            const target = gameState.player.field[0];
            const hasRedis = gameState.player.field.some(c => c.id === 'redis');
            if (hasRedis && target.category === 'database') {
              damage = Math.floor(damage * 0.7);
            }
            target.currentHp -= damage;
            addLog(`${attackCard.icon} ${attackCard.name} â†’ ${target.icon} ${damage} ë°ë¯¸ì§€!`, 'damage');
            if (target.currentHp <= 0) {
              const destroyed = gameState.player.field.shift();
              addLog(`${destroyed.icon} ${destroyed.name} íŒŒê´´!`, 'damage');
            }
          } else {
            gameState.player.hp = Math.max(0, gameState.player.hp - damage);
            addLog(`${attackCard.icon} ${attackCard.name}! ${damage} ë°ë¯¸ì§€!`, 'damage');
          }
        }

        checkGameOver();
        setTimeout(() => { startPlayerTurn(); }, 500);
      }, 800);
    }

    function startPlayerTurn() {
      gameState.turn = 'player';
      gameState.turnCount++;
      gameState.maxMana = Math.min(10, gameState.turnCount);
      gameState.currentMana = gameState.maxMana;

      const drawn = drawCard('player');
      if (drawn) addLog(`ì¹´ë“œ ë“œë¡œìš°: ${drawn.icon} ${drawn.name}`, 'info');

      if (gameState.player.field.some(c => c.id === 'cicd')) {
        const bonus = drawCard('player');
        if (bonus) addLog(`ğŸ”„ CI/CD íš¨ê³¼: ${bonus.icon} ${bonus.name} ì¶”ê°€ ë“œë¡œìš°!`, 'info');
      }

      gameState.player.field.forEach(c => c.canAttack = true);

      document.getElementById('turnIndicator').textContent = 'ë‚´ í„´';
      document.getElementById('turnIndicator').classList.remove('enemy');
      document.getElementById('endTurnBtn').disabled = false;

      updateUI();
    }

    function checkGameOver() {
      if (gameState.enemy.hp <= 0) {
        setTimeout(() => showGameOver(true), 500);
      } else if (gameState.player.hp <= 0) {
        setTimeout(() => showGameOver(false), 500);
      }
      updateUI();
    }

    function showGameOver(win) {
      const modal = document.getElementById('gameOverModal');
      const content = document.getElementById('gameOverContent');
      content.className = 'game-over-content ' + (win ? 'win' : 'lose');
      document.getElementById('gameOverTitle').textContent = win ? 'ğŸ‰ ìŠ¹ë¦¬!' : 'ğŸ’€ íŒ¨ë°°...';
      document.getElementById('gameOverMsg').textContent = win ? 'ìƒëŒ€ ì„œë²„ë¥¼ ë‹¤ìš´ì‹œì¼°ìŠµë‹ˆë‹¤!' : 'ì„œë²„ê°€ ë‹¤ìš´ë˜ì—ˆìŠµë‹ˆë‹¤...';
      modal.classList.add('active');
    }

    function restartGame() {
      document.getElementById('gameOverModal').classList.remove('active');
      startGame(gameState.difficulty);
    }

    function backToMenu() {
      document.getElementById('gameOverModal').classList.remove('active');
      gameWrapper.classList.remove('active');
      gameStart.style.display = 'block';

      // í—¤ë”, íƒ­ ë‹¤ì‹œ ë³´ì´ê¸°
      document.querySelector('header').classList.remove('hidden');
      document.querySelector('.tabs').classList.remove('hidden');
      document.querySelector('.container').classList.remove('game-mode');
      disableGameMode();
    }

    function surrenderGame() {
      if (confirm('ì •ë§ ê¸°ê¶Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) showGameOver(false);
    }

    function showHelp() {
      alert(`ğŸ® ê²Œì„ ë°©ë²•

1. ë§¤í„´ ë§ˆë‚˜ê°€ 1ì”© ì¦ê°€í•©ë‹ˆë‹¤ (ìµœëŒ€ 10)
2. í•¸ë“œì˜ ì¹´ë“œë¥¼ ë“œë˜ê·¸í•´ì„œ í•„ë“œì— ë†“ìœ¼ì„¸ìš”
3. í•„ë“œì˜ ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´ ê³µê²©í•©ë‹ˆë‹¤ (ì´ˆë¡ í…Œë‘ë¦¬)
4. ìƒëŒ€ ì„œë²„ HPë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ë©´ ìŠ¹ë¦¬!

ğŸ’¡ íŒ
- ì¹´ë“œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ìƒì„¸ ì„¤ëª…ì„ ë³¼ ìˆ˜ ìˆì–´ìš”
- ë°©ì–´ ì¹´ë“œ(WAF, SSL)ë¡œ ê³µê²©ì„ ë§‰ìœ¼ì„¸ìš”
- RedisëŠ” DB ì•ì— ë°°ì¹˜í•˜ë©´ ë°ë¯¸ì§€ ê°ì†Œ
- CI/CDëŠ” ë§¤í„´ ì¶”ê°€ ë“œë¡œìš°!`);
    }

    function addLog(message, type = '') {
      const entry = document.createElement('div');
      entry.className = 'log-entry ' + type;
      entry.textContent = message;
      battleLog.appendChild(entry);
      battleLog.scrollTop = battleLog.scrollHeight;
    }

    // ============ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ============
    function handleDragStart(e, index) {
      if (gameState.turn !== 'player') return;
      const card = gameState.player.hand[index];
      if (card.cost > gameState.currentMana) return;

      draggedCard = card;
      draggedIndex = index;
      e.target.classList.add('dragging');
      
      e.dataTransfer.effectAllowed = 'move';
      e.dataTransfer.setData('text/plain', index);
    }

    function handleDragEnd(e) {
      e.target.classList.remove('dragging');
      playerSection.classList.remove('drop-target');
      draggedCard = null;
      draggedIndex = null;
    }

    function handleDragOver(e) {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      playerSection.classList.add('drop-target');
    }

    function handleDragLeave(e) {
      playerSection.classList.remove('drop-target');
    }

    function handleDrop(e) {
      e.preventDefault();
      playerSection.classList.remove('drop-target');
      
      if (draggedIndex !== null) {
        playCard(draggedIndex);
      }
    }

    // ============ UI ì—…ë°ì´íŠ¸ ============
    function updateUI() {
      // ë§ˆë‚˜
      const manaOrbs = document.getElementById('manaOrbs');
      manaOrbs.innerHTML = Array(gameState.maxMana).fill(0).map((_, i) =>
        `<div class="mana-orb ${i >= gameState.currentMana ? 'empty' : ''}"></div>`
      ).join('');
      document.getElementById('manaText').textContent = `${gameState.currentMana}/${gameState.maxMana}`;

      // HP
      const playerHpPct = (gameState.player.hp / gameState.player.maxHp) * 100;
      const enemyHpPct = (gameState.enemy.hp / gameState.enemy.maxHp) * 100;

      document.getElementById('playerHpBar').style.width = playerHpPct + '%';
      document.getElementById('playerHpBar').className = 'health-bar-fill' + (playerHpPct < 30 ? ' low' : '');
      document.getElementById('playerHpText').textContent = `${gameState.player.hp}/${gameState.player.maxHp}`;

      document.getElementById('enemyHpBar').style.width = enemyHpPct + '%';
      document.getElementById('enemyHpBar').className = 'health-bar-fill' + (enemyHpPct < 30 ? ' low' : '');
      document.getElementById('enemyHpText').textContent = `${gameState.enemy.hp}/${gameState.enemy.maxHp}`;

      // í•¸ë“œ
      playerHand.innerHTML = gameState.player.hand.map((card, i) => {
        const disabled = card.cost > gameState.currentMana;
        const selected = selectedHandIndex === i;
        return `
          <div class="hand-card ${disabled ? 'disabled' : ''} ${selected ? 'selected' : ''}" 
               draggable="${!disabled && !isMobile}" 
               data-index="${i}"
               data-card-id="${card.id}">
            <div class="hand-card-cost">${card.cost}</div>
            <div class="hand-card-icon">${card.icon}</div>
            <div class="hand-card-name">${card.name}</div>
            <div class="hand-card-stats">
              <span>â¤ï¸${card.hp}</span>
              <span>âš”ï¸${card.attack}</span>
            </div>
          </div>
        `;
      }).join('');

      // í•¸ë“œ ì¹´ë“œ ì´ë²¤íŠ¸ ë°”ì¸ë”©
      document.querySelectorAll('#playerHand .hand-card').forEach(el => {
        const idx = parseInt(el.dataset.index);
        const cardId = el.dataset.cardId;
        const card = gameState.player.hand[idx];
        
        if (isMobile) {
          // ëª¨ë°”ì¼: íƒ­í•´ì„œ ì„ íƒ
          el.onclick = () => {
            if (card.cost > gameState.currentMana) return;
            if (selectedHandIndex === idx) {
              selectedHandIndex = null; // ì„ íƒ í•´ì œ
            } else {
              selectedHandIndex = idx; // ì„ íƒ
              showCardInfo(allCards.find(c => c.id === cardId));
            }
            updateUI();
          };
        } else {
          // ë°ìŠ¤í¬í†±: ë“œë˜ê·¸
          el.ondragstart = (e) => handleDragStart(e, idx);
          el.ondragend = handleDragEnd;
          el.onmouseenter = () => showCardInfo(allCards.find(c => c.id === cardId));
          el.onmouseleave = () => showCardInfo(null);
          el.onclick = () => {
            // ë°ìŠ¤í¬í†±ì—ì„œë„ í´ë¦­ìœ¼ë¡œ ë°°ì¹˜ ê°€ëŠ¥
            if (card.cost <= gameState.currentMana) {
              playCard(idx);
            }
          };
        }
      });

      // í”Œë ˆì´ì–´ í•„ë“œ
      playerField.innerHTML = gameState.player.field.length > 0 
        ? gameState.player.field.map((card, i) => `
          <div class="field-card ${card.canAttack ? 'can-attack' : ''}" 
               data-index="${i}"
               data-card-id="${card.id}">
            <div class="field-card-icon">${card.icon}</div>
            <div class="field-card-name">${card.name}</div>
            <div class="field-card-atk">âš”ï¸${card.attack}</div>
            <div class="field-card-hp">â¤ï¸${card.currentHp}</div>
          </div>
        `).join('')
        : '<div class="field-placeholder">ì¹´ë“œë¥¼ ì—¬ê¸°ì— ë“œë˜ê·¸í•˜ì„¸ìš”</div>';

      // í”Œë ˆì´ì–´ í•„ë“œ ì´ë²¤íŠ¸ ë°”ì¸ë”©
      document.querySelectorAll('#playerField .field-card').forEach(el => {
        const idx = parseInt(el.dataset.index);
        const cardId = el.dataset.cardId;
        el.onclick = () => attackWithFieldCard(idx);
        el.onmouseenter = () => showCardInfo(allCards.find(c => c.id === cardId));
        el.onmouseleave = () => showCardInfo(null);
      });

      // ì  í•„ë“œ
      enemyField.innerHTML = gameState.enemy.field.length > 0
        ? gameState.enemy.field.map(card => `
          <div class="field-card" data-card-id="${card.id}">
            <div class="field-card-icon">${card.icon}</div>
            <div class="field-card-name">${card.name}</div>
            <div class="field-card-atk">âš”ï¸${card.attack}</div>
            <div class="field-card-hp">â¤ï¸${card.currentHp}</div>
          </div>
        `).join('')
        : '<div class="field-placeholder">ì  ì„œë²„</div>';

      // ì  í•„ë“œ ì´ë²¤íŠ¸ ë°”ì¸ë”©
      document.querySelectorAll('#enemyField .field-card').forEach(el => {
        const cardId = el.dataset.cardId;
        el.onmouseenter = () => showCardInfo(allCards.find(c => c.id === cardId));
        el.onmouseleave = () => showCardInfo(null);
      });

      // ë“œë¡­ ì˜ì—­ ì´ë²¤íŠ¸
      playerSection.ondragover = handleDragOver;
      playerSection.ondragleave = handleDragLeave;
      playerSection.ondrop = handleDrop;

      // ëª¨ë°”ì¼: í•„ë“œ íƒ­í•˜ë©´ ì„ íƒëœ ì¹´ë“œ ë°°ì¹˜
      if (isMobile) {
        playerField.onclick = (e) => {
          if (e.target.classList.contains('field-card')) return; // í•„ë“œ ì¹´ë“œ í´ë¦­ì€ ê³µê²©
          if (selectedHandIndex !== null) {
            playCard(selectedHandIndex);
            selectedHandIndex = null;
          }
        };
      }
    }

    // ============ íƒ­/í•„í„° ============
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.tab).classList.add('active');
      });
    });

    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderCards(btn.dataset.filter);
      });
    });

    // ì´ˆê¸°í™”
    renderCards();

    // PWA Service Worker ë“±ë¡
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js')
        .then(reg => console.log('SW registered'))
        .catch(err => console.log('SW registration failed'));
    }

    // ê²Œì„ ëª¨ë“œì—ì„œ ìŠ¤í¬ë¡¤ ì™„ì „ ì°¨ë‹¨
    let isGameMode = false;
    
    function enableGameMode() {
      isGameMode = true;
      document.body.classList.add('game-active');
      document.documentElement.style.overflow = 'hidden';
      window.scrollTo(0, 0);
    }
    
    function disableGameMode() {
      isGameMode = false;
      document.body.classList.remove('game-active');
      document.documentElement.style.overflow = '';
    }

    // í„°ì¹˜ ìŠ¤í¬ë¡¤ ì°¨ë‹¨ (ê²Œì„ ëª¨ë“œì—ì„œë§Œ)
    document.addEventListener('touchmove', function(e) {
      if (isGameMode) {
        // í•¸ë“œ ì¹´ë“œ ìŠ¤í¬ë¡¤ë§Œ í—ˆìš©
        if (!e.target.closest('.hand')) {
          e.preventDefault();
        }
      }
    }, { passive: false });

    // ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ì°¨ë‹¨
    document.addEventListener('scroll', function(e) {
      if (isGameMode) {
        window.scrollTo(0, 0);
      }
    });

    // ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ìŠ¤í¬ë¡¤ ë¦¬ì…‹
    window.addEventListener('resize', function() {
      if (isGameMode) {
        window.scrollTo(0, 0);
      }
    });
  </script>
</body>
</html>
