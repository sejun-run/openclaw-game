<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì„œë²„ ë””íœìŠ¤ - ì¸í”„ë¼ ì¹´ë“œê²Œì„</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #eee;
      font-family: 'Segoe UI', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      text-align: center;
      padding: 20px 0;
      margin-bottom: 20px;
    }

    h1 {
      font-size: 2.5em;
      background: linear-gradient(90deg, #00d9ff, #00ff88);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 10px;
    }

    .subtitle { color: #888; font-size: 1.1em; }

    .tabs {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 30px;
    }

    .tab-btn {
      padding: 12px 30px;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 25px;
      color: #fff;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1em;
    }

    .tab-btn:hover, .tab-btn.active {
      background: linear-gradient(90deg, #00d9ff, #00ff88);
      color: #000;
      border-color: transparent;
    }

    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* ì¹´ë“œ ê·¸ë¦¬ë“œ */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
    }

    .filter-btn {
      padding: 8px 16px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      color: #aaa;
      cursor: pointer;
      font-size: 0.85em;
      transition: all 0.3s;
    }

    .filter-btn:hover, .filter-btn.active {
      background: rgba(255,255,255,0.15);
      color: #fff;
    }

    /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
    .card {
      background: linear-gradient(145deg, #2a2a4a, #1a1a2e);
      border-radius: 15px;
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
      position: relative;
      overflow: hidden;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0, 217, 255, 0.3);
    }

    .card.computing { border-color: #ff6b6b; }
    .card.storage { border-color: #ffd93d; }
    .card.database { border-color: #6bcb77; }
    .card.network { border-color: #4d96ff; }
    .card.security { border-color: #9b59b6; }
    .card.devops { border-color: #ff9f43; }
    .card.monitoring { border-color: #00cec9; }
    .card.attack { border-color: #e74c3c; }

    .card-icon { font-size: 2.5em; text-align: center; margin-bottom: 10px; }
    .card-name { font-weight: bold; font-size: 1.1em; text-align: center; margin-bottom: 5px; }
    .card-type { font-size: 0.75em; text-align: center; color: #888; text-transform: uppercase; letter-spacing: 1px; }

    .card-stats {
      display: flex;
      justify-content: space-around;
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }

    .stat { text-align: center; }
    .stat-value { font-weight: bold; font-size: 1.2em; color: #00d9ff; }
    .stat-label { font-size: 0.7em; color: #666; }

    /* ëª¨ë‹¬ */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .modal-overlay.active { display: flex; }

    .modal {
      background: linear-gradient(145deg, #2a2a4a, #1a1a2e);
      border-radius: 20px;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
    }

    .modal-header {
      padding: 30px;
      text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .modal-icon { font-size: 4em; margin-bottom: 15px; }
    .modal-name { font-size: 1.8em; margin-bottom: 5px; }
    .modal-category { color: #888; text-transform: uppercase; letter-spacing: 2px; font-size: 0.85em; }

    .modal-body { padding: 30px; }
    .modal-section { margin-bottom: 25px; }
    .modal-section h3 { color: #00d9ff; margin-bottom: 10px; font-size: 1em; text-transform: uppercase; letter-spacing: 1px; }
    .modal-section p { color: #ccc; line-height: 1.7; }

    .modal-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 25px;
    }

    .modal-stat {
      background: rgba(0,0,0,0.3);
      padding: 15px;
      border-radius: 10px;
      text-align: center;
    }

    .modal-stat-value { font-size: 1.5em; font-weight: bold; color: #00ff88; }
    .modal-stat-label { font-size: 0.75em; color: #888; margin-top: 5px; }

    .services-list { display: flex; flex-wrap: wrap; gap: 8px; }
    .service-tag { background: rgba(255,255,255,0.1); padding: 5px 12px; border-radius: 15px; font-size: 0.85em; }
    .service-tag.aws { border-left: 3px solid #ff9900; }
    .service-tag.gcp { border-left: 3px solid #4285f4; }
    .service-tag.azure { border-left: 3px solid #0089d6; }

    .close-btn {
      position: absolute;
      top: 15px; right: 15px;
      background: none;
      border: none;
      color: #888;
      font-size: 1.5em;
      cursor: pointer;
    }

    .close-btn:hover { color: #fff; }

    .tip-box {
      background: rgba(0, 217, 255, 0.1);
      border-left: 3px solid #00d9ff;
      padding: 15px;
      border-radius: 0 10px 10px 0;
      margin-top: 15px;
    }

    .tip-box strong { color: #00d9ff; }

    /* ========== ê²Œì„ í™”ë©´ ========== */
    .game-container {
      display: none;
      flex-direction: column;
      gap: 15px;
      min-height: 80vh;
    }

    .game-container.active { display: flex; }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: rgba(0,0,0,0.3);
      border-radius: 15px;
    }

    .turn-indicator {
      font-size: 1.2em;
      padding: 8px 20px;
      border-radius: 20px;
      background: linear-gradient(90deg, #00d9ff, #00ff88);
      color: #000;
      font-weight: bold;
    }

    .turn-indicator.enemy { background: linear-gradient(90deg, #e74c3c, #c0392b); color: #fff; }

    .mana-display {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.3em;
    }

    .mana-orbs { display: flex; gap: 5px; }
    .mana-orb {
      width: 25px; height: 25px;
      border-radius: 50%;
      background: #00d9ff;
      box-shadow: 0 0 10px #00d9ff;
    }
    .mana-orb.empty { background: #333; box-shadow: none; }

    /* í”Œë ˆì´ì–´ ì˜ì—­ */
    .player-section {
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 15px;
      background: rgba(0,0,0,0.2);
      border-radius: 15px;
    }

    .player-section.enemy { border: 2px solid rgba(231, 76, 60, 0.3); }
    .player-section.player { border: 2px solid rgba(0, 217, 255, 0.3); }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .player-name { font-weight: bold; font-size: 1.1em; }
    .player-name.enemy { color: #e74c3c; }
    .player-name.player { color: #00d9ff; }

    .health-bar {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .health-bar-bg {
      width: 200px;
      height: 20px;
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      overflow: hidden;
    }

    .health-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #27ae60, #2ecc71);
      transition: width 0.5s;
    }

    .health-bar-fill.low { background: linear-gradient(90deg, #e74c3c, #c0392b); }

    .health-text { font-weight: bold; min-width: 60px; }

    .field {
      display: flex;
      gap: 10px;
      min-height: 120px;
      padding: 10px;
      background: rgba(0,0,0,0.2);
      border-radius: 10px;
      flex-wrap: wrap;
    }

    .field-card {
      width: 90px;
      background: linear-gradient(145deg, #3a3a5a, #2a2a4a);
      border-radius: 10px;
      padding: 8px;
      text-align: center;
      position: relative;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
    }

    .field-card:hover { border-color: #00d9ff; }
    .field-card.selected { border-color: #00ff88; box-shadow: 0 0 15px rgba(0, 255, 136, 0.5); }
    .field-card.can-attack { animation: pulse 1s infinite; }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 5px rgba(0, 255, 136, 0.5); }
      50% { box-shadow: 0 0 20px rgba(0, 255, 136, 0.8); }
    }

    .field-card-icon { font-size: 1.8em; }
    .field-card-name { font-size: 0.7em; margin-top: 5px; }
    .field-card-hp {
      position: absolute;
      bottom: 5px; right: 5px;
      background: #27ae60;
      color: #fff;
      padding: 2px 6px;
      border-radius: 8px;
      font-size: 0.7em;
      font-weight: bold;
    }
    .field-card-atk {
      position: absolute;
      bottom: 5px; left: 5px;
      background: #e74c3c;
      color: #fff;
      padding: 2px 6px;
      border-radius: 8px;
      font-size: 0.7em;
      font-weight: bold;
    }

    /* ì¤‘ì•™ ë°°í‹€ ë¡œê·¸ */
    .battle-log {
      background: rgba(0,0,0,0.4);
      border-radius: 10px;
      padding: 15px;
      max-height: 80px;
      overflow-y: auto;
      font-size: 0.9em;
    }

    .log-entry { padding: 3px 0; color: #aaa; }
    .log-entry.damage { color: #e74c3c; }
    .log-entry.heal { color: #27ae60; }
    .log-entry.info { color: #00d9ff; }

    /* í•¸ë“œ */
    .hand-section {
      padding: 15px;
      background: rgba(0, 217, 255, 0.1);
      border-radius: 15px;
      border: 1px solid rgba(0, 217, 255, 0.3);
    }

    .hand-label { font-size: 0.85em; color: #888; margin-bottom: 10px; }

    .hand {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      padding-bottom: 10px;
    }

    .hand-card {
      min-width: 100px;
      background: linear-gradient(145deg, #3a3a5a, #2a2a4a);
      border-radius: 12px;
      padding: 10px;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
      position: relative;
    }

    .hand-card:hover {
      transform: translateY(-10px);
      border-color: #00d9ff;
    }

    .hand-card.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .hand-card.disabled:hover {
      transform: none;
      border-color: transparent;
    }

    .hand-card-cost {
      position: absolute;
      top: -8px; right: -8px;
      background: #00d9ff;
      color: #000;
      width: 24px; height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 0.85em;
    }

    .hand-card-icon { font-size: 2em; text-align: center; }
    .hand-card-name { font-size: 0.75em; text-align: center; margin-top: 5px; }
    .hand-card-stats { display: flex; justify-content: space-around; font-size: 0.7em; margin-top: 8px; color: #888; }

    /* ê²Œì„ ì»¨íŠ¸ë¡¤ */
    .game-controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      padding: 15px;
    }

    .game-btn {
      padding: 12px 30px;
      border: none;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 1em;
    }

    .game-btn.primary {
      background: linear-gradient(90deg, #00d9ff, #00ff88);
      color: #000;
    }

    .game-btn.secondary {
      background: rgba(255,255,255,0.1);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.2);
    }

    .game-btn.danger {
      background: linear-gradient(90deg, #e74c3c, #c0392b);
      color: #fff;
    }

    .game-btn:hover { transform: scale(1.05); }
    .game-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

    /* ê²Œì„ ì‹œì‘ í™”ë©´ */
    .game-start {
      text-align: center;
      padding: 50px 20px;
    }

    .game-start h2 { font-size: 2em; margin-bottom: 20px; }
    .game-start p { color: #888; margin-bottom: 30px; max-width: 500px; margin-left: auto; margin-right: auto; }

    .difficulty-select {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-bottom: 30px;
    }

    .difficulty-btn {
      padding: 20px 30px;
      background: rgba(255,255,255,0.05);
      border: 2px solid rgba(255,255,255,0.1);
      border-radius: 15px;
      color: #fff;
      cursor: pointer;
      transition: all 0.3s;
    }

    .difficulty-btn:hover {
      border-color: #00d9ff;
      background: rgba(0, 217, 255, 0.1);
    }

    .difficulty-btn h3 { margin-bottom: 5px; }
    .difficulty-btn p { font-size: 0.85em; color: #888; }

    /* ê²Œì„ ì˜¤ë²„ ëª¨ë‹¬ */
    .game-over-modal {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.9);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .game-over-modal.active { display: flex; }

    .game-over-content {
      text-align: center;
      padding: 50px;
    }

    .game-over-content h2 {
      font-size: 3em;
      margin-bottom: 20px;
    }

    .game-over-content.win h2 { color: #00ff88; }
    .game-over-content.lose h2 { color: #e74c3c; }

    .game-over-content p { color: #888; margin-bottom: 30px; font-size: 1.2em; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸƒ ì„œë²„ ë””íœìŠ¤</h1>
      <p class="subtitle">ì¸í”„ë¼ ì¹´ë“œê²Œì„ìœ¼ë¡œ ë°°ìš°ëŠ” í´ë¼ìš°ë“œ ì•„í‚¤í…ì²˜</p>
    </header>

    <div class="tabs">
      <button class="tab-btn active" data-tab="collection">ğŸ“š ì¹´ë“œ ë„ê°</button>
      <button class="tab-btn" data-tab="game">ğŸ® ê²Œì„í•˜ê¸°</button>
    </div>

    <!-- ì¹´ë“œ ë„ê° -->
    <div id="collection" class="tab-content active">
      <div class="filters">
        <button class="filter-btn active" data-filter="all">ì „ì²´</button>
        <button class="filter-btn" data-filter="computing">ğŸ–¥ï¸ ì»´í“¨íŒ…</button>
        <button class="filter-btn" data-filter="storage">ğŸ’¾ ìŠ¤í† ë¦¬ì§€</button>
        <button class="filter-btn" data-filter="database">ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤</button>
        <button class="filter-btn" data-filter="network">ğŸŒ ë„¤íŠ¸ì›Œí¬</button>
        <button class="filter-btn" data-filter="security">ğŸ”’ ë³´ì•ˆ</button>
        <button class="filter-btn" data-filter="devops">âš™ï¸ DevOps</button>
        <button class="filter-btn" data-filter="monitoring">ğŸ“Š ëª¨ë‹ˆí„°ë§</button>
        <button class="filter-btn" data-filter="attack">ğŸ’¥ ê³µê²©</button>
      </div>
      <div class="card-grid" id="cardGrid"></div>
    </div>

    <!-- ê²Œì„ í™”ë©´ -->
    <div id="game" class="tab-content">
      <div class="game-start" id="gameStart">
        <h2>ğŸš€ ì„œë²„ë¥¼ ì§€ì¼œë¼!</h2>
        <p>ì¸í”„ë¼ ì¹´ë“œë¡œ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ê³ , ìƒëŒ€ì˜ ê³µê²©ìœ¼ë¡œë¶€í„° ë°©ì–´í•˜ì„¸ìš”. ìƒëŒ€ ì„œë²„ì˜ HPë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ë©´ ìŠ¹ë¦¬!</p>
        
        <div class="difficulty-select">
          <div class="difficulty-btn" onclick="startGame('easy')">
            <h3>ğŸŸ¢ ì‰¬ì›€</h3>
            <p>ì…ë¬¸ììš©</p>
          </div>
          <div class="difficulty-btn" onclick="startGame('normal')">
            <h3>ğŸŸ¡ ë³´í†µ</h3>
            <p>ê¸°ë³¸ ë‚œì´ë„</p>
          </div>
          <div class="difficulty-btn" onclick="startGame('hard')">
            <h3>ğŸ”´ ì–´ë ¤ì›€</h3>
            <p>ë„ì „!</p>
          </div>
        </div>
      </div>

      <div class="game-container" id="gameContainer">
        <div class="game-header">
          <div class="turn-indicator" id="turnIndicator">ë‚´ í„´</div>
          <div class="mana-display">
            <span>âš¡</span>
            <div class="mana-orbs" id="manaOrbs"></div>
            <span id="manaText">0/0</span>
          </div>
          <button class="game-btn secondary" onclick="showHelp()">â“ ë„ì›€ë§</button>
        </div>

        <!-- ìƒëŒ€ ì˜ì—­ -->
        <div class="player-section enemy">
          <div class="section-header">
            <span class="player-name enemy">ğŸ¤– DDoS ë´‡</span>
            <div class="health-bar">
              <div class="health-bar-bg">
                <div class="health-bar-fill" id="enemyHpBar" style="width: 100%"></div>
              </div>
              <span class="health-text" id="enemyHpText">100/100</span>
            </div>
          </div>
          <div class="field" id="enemyField"></div>
        </div>

        <!-- ë°°í‹€ ë¡œê·¸ -->
        <div class="battle-log" id="battleLog">
          <div class="log-entry info">ê²Œì„ ì‹œì‘! ì¹´ë“œë¥¼ ë‚´ë ¤ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ì„¸ìš”.</div>
        </div>

        <!-- ë‚´ ì˜ì—­ -->
        <div class="player-section player">
          <div class="section-header">
            <span class="player-name player">ğŸ§‘â€ğŸ’» ë‚˜</span>
            <div class="health-bar">
              <div class="health-bar-bg">
                <div class="health-bar-fill" id="playerHpBar" style="width: 100%"></div>
              </div>
              <span class="health-text" id="playerHpText">100/100</span>
            </div>
          </div>
          <div class="field" id="playerField"></div>
        </div>

        <!-- í•¸ë“œ -->
        <div class="hand-section">
          <div class="hand-label">ğŸ´ ë‚´ íŒ¨ (ì¹´ë“œë¥¼ í´ë¦­í•´ì„œ ë‚´ë ¤ë†“ê¸°)</div>
          <div class="hand" id="playerHand"></div>
        </div>

        <!-- ì»¨íŠ¸ë¡¤ -->
        <div class="game-controls">
          <button class="game-btn primary" id="endTurnBtn" onclick="endTurn()">í„´ ì¢…ë£Œ â¡ï¸</button>
          <button class="game-btn danger" onclick="surrenderGame()">ğŸ³ï¸ ê¸°ê¶Œ</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ì¹´ë“œ ìƒì„¸ ëª¨ë‹¬ -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <button class="close-btn" onclick="closeModal()">âœ•</button>
      <div class="modal-header">
        <div class="modal-icon" id="modalIcon"></div>
        <div class="modal-name" id="modalName"></div>
        <div class="modal-category" id="modalCategory"></div>
      </div>
      <div class="modal-body">
        <div class="modal-stats" id="modalStats"></div>
        <div class="modal-section">
          <h3>ğŸ“‹ ì„¤ëª…</h3>
          <p id="modalDesc"></p>
        </div>
        <div class="modal-section">
          <h3>ğŸ® ê²Œì„ íš¨ê³¼</h3>
          <p id="modalEffect"></p>
        </div>
        <div class="modal-section">
          <h3>â˜ï¸ ì‹¤ì œ ì„œë¹„ìŠ¤</h3>
          <div class="services-list" id="modalServices"></div>
        </div>
        <div class="modal-section">
          <h3>ğŸ’¡ ì‹¤ì „ íŒ</h3>
          <div class="tip-box" id="modalTip"></div>
        </div>
        <div class="modal-section">
          <h3>ğŸ”— ì‹œë„ˆì§€ ì¹´ë“œ</h3>
          <div class="services-list" id="modalSynergy"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ê²Œì„ ì˜¤ë²„ ëª¨ë‹¬ -->
  <div class="game-over-modal" id="gameOverModal">
    <div class="game-over-content" id="gameOverContent">
      <h2 id="gameOverTitle">ìŠ¹ë¦¬!</h2>
      <p id="gameOverMsg">ìƒëŒ€ ì„œë²„ë¥¼ ë‹¤ìš´ì‹œì¼°ìŠµë‹ˆë‹¤!</p>
      <button class="game-btn primary" onclick="restartGame()">ë‹¤ì‹œ í•˜ê¸°</button>
      <button class="game-btn secondary" onclick="backToMenu()" style="margin-left: 10px;">ë©”ë‰´ë¡œ</button>
    </div>
  </div>

  <script>
    // ============ ì¹´ë“œ ë°ì´í„° ============
    const allCards = [
      // ì»´í“¨íŒ…
      { id: 'ec2', name: 'EC2', icon: 'ğŸ–¥ï¸', category: 'computing', categoryName: 'ì»´í“¨íŒ…', cost: 3, hp: 100, attack: 20,
        description: 'ê°€ìƒ ì„œë²„ì…ë‹ˆë‹¤. í´ë¼ìš°ë“œì—ì„œ ê°€ì¥ ê¸°ë³¸ì ì¸ ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤.',
        effect: 'ê¸°ë³¸ ì„œë²„ ì¹´ë“œ. ì•ˆì •ì ì¸ HPë¡œ ë°©ì–´ì— ìœ ë¦¬.',
        services: [{ name: 'AWS EC2', provider: 'aws' }, { name: 'GCP Compute Engine', provider: 'gcp' }],
        tip: 'ì˜ˆì•½ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë¹„ìš©ì„ ìµœëŒ€ 72% ì ˆê°í•  ìˆ˜ ìˆì–´ìš”.', synergy: ['Load Balancer', 'Auto Scaling'] },
      { id: 'lambda', name: 'Lambda', icon: 'Î»', category: 'computing', categoryName: 'ì»´í“¨íŒ…', cost: 2, hp: 30, attack: 40,
        description: 'ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜. ì„œë²„ ê´€ë¦¬ ì—†ì´ ì½”ë“œë§Œ ì‹¤í–‰.',
        effect: 'HPëŠ” ë‚®ì§€ë§Œ ê³µê²©ë ¥ì´ ë†’ìŒ. ë¹ ë¥¸ ê³µê²©ì— ìœ ë¦¬.',
        services: [{ name: 'AWS Lambda', provider: 'aws' }],
        tip: 'ì§§ì€ ì‹¤í–‰ ì‹œê°„ì˜ ì´ë²¤íŠ¸ ê¸°ë°˜ ì‘ì—…ì— ìµœì .', synergy: ['API Gateway', 'DynamoDB'] },
      { id: 'kubernetes', name: 'Kubernetes', icon: 'â˜¸ï¸', category: 'computing', categoryName: 'ì»´í“¨íŒ…', cost: 5, hp: 150, attack: 30,
        description: 'ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í”Œë«í¼.',
        effect: 'ë†’ì€ HPì™€ ê³µê²©ë ¥. íŒŒê´´ ì‹œ 50% í™•ë¥ ë¡œ ë¶€í™œ.',
        services: [{ name: 'AWS EKS', provider: 'aws' }, { name: 'GCP GKE', provider: 'gcp' }],
        tip: 'ëŒ€ê·œëª¨ ì„œë¹„ìŠ¤ ìš´ì˜ì˜ í‘œì¤€.', synergy: ['Container', 'Prometheus'] },

      // ë°ì´í„°ë² ì´ìŠ¤
      { id: 'rds', name: 'RDS', icon: 'ğŸ—„ï¸', category: 'database', categoryName: 'ë°ì´í„°ë² ì´ìŠ¤', cost: 4, hp: 120, attack: 15,
        description: 'ê´€ë¦¬í˜• ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤.',
        effect: 'ë†’ì€ HPë¡œ ì•ˆì •ì . Redisì™€ ì‹œë„ˆì§€.',
        services: [{ name: 'AWS RDS', provider: 'aws' }],
        tip: 'Multi-AZë¡œ ê³ ê°€ìš©ì„± í™•ë³´.', synergy: ['Redis', 'Backup'] },
      { id: 'redis', name: 'Redis', icon: 'âš¡', category: 'database', categoryName: 'ë°ì´í„°ë² ì´ìŠ¤', cost: 3, hp: 50, attack: 35,
        description: 'ì¸ë©”ëª¨ë¦¬ ìºì‹œ. ë§¤ìš° ë¹ ë¥¸ ì‘ë‹µ.',
        effect: 'DB ì¹´ë“œ ì•ì— ë°°ì¹˜ ì‹œ ë°›ëŠ” ë°ë¯¸ì§€ 30% ê°ì†Œ.',
        services: [{ name: 'AWS ElastiCache', provider: 'aws' }],
        tip: 'ìºì‹œ ì „ëµì´ í•µì‹¬!', synergy: ['RDS', 'API Gateway'] },

      // ë„¤íŠ¸ì›Œí¬
      { id: 'lb', name: 'Load Balancer', icon: 'âš–ï¸', category: 'network', categoryName: 'ë„¤íŠ¸ì›Œí¬', cost: 3, hp: 70, attack: 10,
        description: 'íŠ¸ë˜í”½ ë¶„ì‚°ê¸°.',
        effect: 'ì„œë²„ 2ê°œ ì´ìƒ ì‹œ ë°ë¯¸ì§€ ë¶„ì‚°.',
        services: [{ name: 'AWS ALB', provider: 'aws' }],
        tip: 'ALBëŠ” HTTP, NLBëŠ” TCP ë ˆë²¨.', synergy: ['EC2', 'Auto Scaling'] },
      { id: 'cdn', name: 'CDN', icon: 'ğŸŒ', category: 'network', categoryName: 'ë„¤íŠ¸ì›Œí¬', cost: 2, hp: 40, attack: 0,
        description: 'ì½˜í…ì¸  ì „ì†¡ ë„¤íŠ¸ì›Œí¬.',
        effect: 'ê³µê²©ë ¥ ì—†ìŒ. ì •ì  ê³µê²© ë¬´íš¨í™”.',
        services: [{ name: 'CloudFront', provider: 'aws' }, { name: 'Cloudflare', provider: 'azure' }],
        tip: 'ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ í•„ìˆ˜!', synergy: ['S3', 'WAF'] },

      // ë³´ì•ˆ
      { id: 'waf', name: 'WAF', icon: 'ğŸ›¡ï¸', category: 'security', categoryName: 'ë³´ì•ˆ', cost: 3, hp: 60, attack: 0,
        description: 'ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°©í™”ë²½.',
        effect: 'SQL Injection ê³µê²© ì™„ì „ ë¬´íš¨í™”.',
        services: [{ name: 'AWS WAF', provider: 'aws' }],
        tip: 'OWASP Top 10 ê·œì¹™ ì ìš©.', synergy: ['CDN', 'Load Balancer'] },
      { id: 'ssl', name: 'SSL/TLS', icon: 'ğŸ”', category: 'security', categoryName: 'ë³´ì•ˆ', cost: 1, hp: 20, attack: 0,
        description: 'ì•”í˜¸í™” í†µì‹ . HTTPSì˜ í•µì‹¬.',
        effect: 'ëª¨ë“  ì•„êµ° ì¹´ë“œ ë°›ëŠ” ë°ë¯¸ì§€ -5.',
        services: [{ name: 'AWS ACM', provider: 'aws' }],
        tip: 'ACMìœ¼ë¡œ ë¬´ë£Œ ì¸ì¦ì„œ ë°œê¸‰.', synergy: ['Load Balancer', 'CDN'] },

      // DevOps
      { id: 'cicd', name: 'CI/CD', icon: 'ğŸ”„', category: 'devops', categoryName: 'DevOps', cost: 2, hp: 40, attack: 20,
        description: 'ì§€ì†ì  í†µí•©/ë°°í¬.',
        effect: 'ë§¤í„´ ì‹œì‘ ì‹œ ì¹´ë“œ 1ì¥ ì¶”ê°€ ë“œë¡œìš°.',
        services: [{ name: 'GitHub Actions', provider: 'aws' }],
        tip: 'ì‘ì€ ë³€ê²½ì„ ìì£¼ ë°°í¬í•˜ì„¸ìš”.', synergy: ['Docker', 'Kubernetes'] },
      { id: 'docker', name: 'Docker', icon: 'ğŸ³', category: 'devops', categoryName: 'DevOps', cost: 1, hp: 30, attack: 10,
        description: 'ì»¨í…Œì´ë„ˆ í”Œë«í¼.',
        effect: 'ë‚®ì€ ì½”ìŠ¤íŠ¸ë¡œ ë¹ ë¥¸ ë°°ì¹˜.',
        services: [{ name: 'Docker', provider: 'aws' }],
        tip: 'Alpine ë² ì´ìŠ¤ ì´ë¯¸ì§€ ì¶”ì²œ!', synergy: ['Kubernetes', 'CI/CD'] },
      { id: 'terraform', name: 'Terraform', icon: 'ğŸ—ï¸', category: 'devops', categoryName: 'DevOps', cost: 2, hp: 30, attack: 15,
        description: 'Infrastructure as Code.',
        effect: 'íŒŒê´´ëœ ì¹´ë“œë¥¼ 2í„´ í›„ ì¬ìƒì„±.',
        services: [{ name: 'Terraform', provider: 'aws' }],
        tip: 'ìƒíƒœ íŒŒì¼ ê´€ë¦¬ê°€ ì¤‘ìš”!', synergy: ['Git', 'CI/CD'] },

      // ëª¨ë‹ˆí„°ë§
      { id: 'prometheus', name: 'Prometheus', icon: 'ğŸ“ˆ', category: 'monitoring', categoryName: 'ëª¨ë‹ˆí„°ë§', cost: 2, hp: 40, attack: 0,
        description: 'ë©”íŠ¸ë¦­ ìˆ˜ì§‘/ëª¨ë‹ˆí„°ë§.',
        effect: 'ìƒëŒ€ ë‹¤ìŒ ê³µê²© ì¹´ë“œ ë¯¸ë¦¬ í™•ì¸.',
        services: [{ name: 'Prometheus', provider: 'aws' }],
        tip: 'Grafanaì™€ í•¨ê»˜ ì‚¬ìš©.', synergy: ['Grafana', 'Alert'] },

      // ê³µê²©
      { id: 'ddos', name: 'DDoS', icon: 'ğŸ’¥', category: 'attack', categoryName: 'ê³µê²©', cost: 3, hp: 0, attack: 50,
        description: 'ë¶„ì‚° ì„œë¹„ìŠ¤ ê±°ë¶€ ê³µê²©.',
        effect: 'ìƒëŒ€ ì„œë²„ì— 50 ë°ë¯¸ì§€. WAFì— ë§‰í˜.',
        services: [], tip: 'ë°©ì–´: AWS Shield', synergy: [] },
      { id: 'spike', name: 'íŠ¸ë˜í”½ ìŠ¤íŒŒì´í¬', icon: 'ğŸ“ˆ', category: 'attack', categoryName: 'ê³µê²©', cost: 2, hp: 0, attack: 30,
        description: 'ê°‘ì‘ìŠ¤ëŸ¬ìš´ íŠ¸ë˜í”½ í­ì¦.',
        effect: 'ìƒëŒ€ ì„œë²„ì— 30 ë°ë¯¸ì§€.',
        services: [], tip: 'ë°©ì–´: Auto Scaling', synergy: [] },
      { id: 'sqli', name: 'SQL Injection', icon: 'ğŸ’‰', category: 'attack', categoryName: 'ê³µê²©', cost: 4, hp: 0, attack: 80,
        description: 'DB ì·¨ì•½ì  ê³µê²©.',
        effect: 'ìƒëŒ€ì—ê²Œ DB ì¹´ë“œê°€ ìˆìœ¼ë©´ 80 ë°ë¯¸ì§€, ì—†ìœ¼ë©´ 20.',
        services: [], tip: 'ë°©ì–´: WAF, Prepared Statement', synergy: [] },
      { id: 'memleak', name: 'ë©”ëª¨ë¦¬ ëˆ„ìˆ˜', icon: 'ğŸ•³ï¸', category: 'attack', categoryName: 'ê³µê²©', cost: 2, hp: 0, attack: 15,
        description: 'ë¦¬ì†ŒìŠ¤ ê³ ê°ˆ ê³µê²©.',
        effect: '3í„´ ë™ì•ˆ ë§¤í„´ 15 ë°ë¯¸ì§€.',
        services: [], tip: 'ë°©ì–´: ëª¨ë‹ˆí„°ë§, ì¬ì‹œì‘', synergy: [] },
    ];

    // ============ ê²Œì„ ìƒíƒœ ============
    let gameState = {
      started: false,
      turn: 'player',
      turnCount: 1,
      maxMana: 1,
      currentMana: 1,
      difficulty: 'normal',
      player: { hp: 100, maxHp: 100, field: [], hand: [], deck: [] },
      enemy: { hp: 100, maxHp: 100, field: [], deck: [] },
      selectedCard: null,
      selectedFieldCard: null,
      memLeakTurns: 0
    };

    // ============ DOM ìš”ì†Œ ============
    const cardGrid = document.getElementById('cardGrid');
    const modalOverlay = document.getElementById('modalOverlay');
    const gameStart = document.getElementById('gameStart');
    const gameContainer = document.getElementById('gameContainer');
    const playerHand = document.getElementById('playerHand');
    const playerField = document.getElementById('playerField');
    const enemyField = document.getElementById('enemyField');
    const battleLog = document.getElementById('battleLog');

    // ============ ì¹´ë“œ ë„ê° ============
    function renderCards(filter = 'all') {
      const filtered = filter === 'all' ? allCards : allCards.filter(c => c.category === filter);
      cardGrid.innerHTML = filtered.map(card => `
        <div class="card ${card.category}" onclick="openModal('${card.id}')">
          <div class="card-icon">${card.icon}</div>
          <div class="card-name">${card.name}</div>
          <div class="card-type">${card.categoryName}</div>
          <div class="card-stats">
            <div class="stat"><div class="stat-value">${card.cost}</div><div class="stat-label">ì½”ìŠ¤íŠ¸</div></div>
            <div class="stat"><div class="stat-value">${card.hp}</div><div class="stat-label">HP</div></div>
            <div class="stat"><div class="stat-value">${card.attack}</div><div class="stat-label">ATK</div></div>
          </div>
        </div>
      `).join('');
    }

    function openModal(cardId) {
      const card = allCards.find(c => c.id === cardId);
      if (!card) return;
      document.getElementById('modalIcon').textContent = card.icon;
      document.getElementById('modalName').textContent = card.name;
      document.getElementById('modalCategory').textContent = card.categoryName;
      document.getElementById('modalStats').innerHTML = `
        <div class="modal-stat"><div class="modal-stat-value">${card.cost}</div><div class="modal-stat-label">ì½”ìŠ¤íŠ¸</div></div>
        <div class="modal-stat"><div class="modal-stat-value">${card.hp}</div><div class="modal-stat-label">HP</div></div>
        <div class="modal-stat"><div class="modal-stat-value">${card.attack}</div><div class="modal-stat-label">ê³µê²©ë ¥</div></div>
      `;
      document.getElementById('modalDesc').textContent = card.description;
      document.getElementById('modalEffect').textContent = card.effect;
      document.getElementById('modalServices').innerHTML = card.services.map(s => `<span class="service-tag ${s.provider}">${s.name}</span>`).join('');
      document.getElementById('modalTip').innerHTML = `<strong>ğŸ’¡ Tip:</strong> ${card.tip}`;
      document.getElementById('modalSynergy').innerHTML = card.synergy.map(s => `<span class="service-tag">${s}</span>`).join('');
      modalOverlay.classList.add('active');
    }

    function closeModal() { modalOverlay.classList.remove('active'); }
    modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) closeModal(); });

    // ============ ê²Œì„ ë¡œì§ ============
    function startGame(difficulty) {
      gameState = {
        started: true,
        turn: 'player',
        turnCount: 1,
        maxMana: 1,
        currentMana: 1,
        difficulty: difficulty,
        player: { hp: 100, maxHp: 100, field: [], hand: [], deck: [] },
        enemy: { hp: difficulty === 'easy' ? 80 : difficulty === 'hard' ? 120 : 100, maxHp: difficulty === 'easy' ? 80 : difficulty === 'hard' ? 120 : 100, field: [], deck: [] },
        selectedCard: null,
        selectedFieldCard: null,
        memLeakTurns: 0
      };

      // ë± ìƒì„± (ê³µê²© ì¹´ë“œ ì œì™¸)
      const deckCards = allCards.filter(c => c.category !== 'attack');
      gameState.player.deck = shuffle([...deckCards, ...deckCards]).slice(0, 20);
      gameState.enemy.deck = shuffle([...allCards]).slice(0, 15);

      // ì´ˆê¸° í•¸ë“œ ë“œë¡œìš°
      for (let i = 0; i < 4; i++) drawCard('player');

      gameStart.style.display = 'none';
      gameContainer.classList.add('active');

      addLog('ê²Œì„ ì‹œì‘! ì¹´ë“œë¥¼ í•„ë“œì— ë‚´ë ¤ë†“ì•„ ì„œë²„ë¥¼ êµ¬ì¶•í•˜ì„¸ìš”.', 'info');
      updateUI();
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function drawCard(who) {
      const state = gameState[who];
      if (state.deck.length > 0 && state.hand.length < 7) {
        const card = { ...state.deck.pop(), uid: Date.now() + Math.random() };
        state.hand.push(card);
        return card;
      }
      return null;
    }

    function playCard(index) {
      if (gameState.turn !== 'player') return;
      const card = gameState.player.hand[index];
      if (!card || card.cost > gameState.currentMana) return;

      gameState.currentMana -= card.cost;

      // ê³µê²© ì¹´ë“œëŠ” ë°”ë¡œ ì‚¬ìš©
      if (card.category === 'attack') {
        useAttackCard(card);
      } else {
        // í•„ë“œì— ë°°ì¹˜
        gameState.player.field.push({ ...card, currentHp: card.hp, canAttack: false });
        addLog(`${card.icon} ${card.name} ë°°ì¹˜!`, 'info');
      }

      gameState.player.hand.splice(index, 1);
      updateUI();
    }

    function useAttackCard(card) {
      let damage = card.attack;
      let blocked = false;

      // WAF ì²´í¬
      if (card.id === 'sqli' && gameState.enemy.field.some(c => c.id === 'waf')) {
        addLog(`ğŸ›¡ï¸ WAFê°€ SQL Injectionì„ ë§‰ì•˜ìŠµë‹ˆë‹¤!`, 'info');
        blocked = true;
      }

      if (!blocked) {
        // SQL Injection íŠ¹ìˆ˜ íš¨ê³¼
        if (card.id === 'sqli') {
          const hasDB = gameState.enemy.field.some(c => c.category === 'database');
          damage = hasDB ? 80 : 20;
        }

        // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ íŠ¹ìˆ˜ íš¨ê³¼
        if (card.id === 'memleak') {
          gameState.memLeakTurns = 3;
          addLog(`ğŸ•³ï¸ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜! 3í„´ê°„ ë§¤í„´ 15 ë°ë¯¸ì§€`, 'damage');
        } else {
          gameState.enemy.hp = Math.max(0, gameState.enemy.hp - damage);
          addLog(`${card.icon} ${card.name}! ${damage} ë°ë¯¸ì§€!`, 'damage');
        }
      }

      checkGameOver();
    }

    function attackWithFieldCard(fieldIndex) {
      if (gameState.turn !== 'player') return;
      const card = gameState.player.field[fieldIndex];
      if (!card || !card.canAttack) return;

      card.canAttack = false;

      // ì  í•„ë“œì— ì¹´ë“œê°€ ìˆìœ¼ë©´ ê·¸ ì¹´ë“œ ê³µê²©, ì—†ìœ¼ë©´ ì§ì ‘ ê³µê²©
      if (gameState.enemy.field.length > 0) {
        const target = gameState.enemy.field[0];
        target.currentHp -= card.attack;
        addLog(`${card.icon} â†’ ${target.icon} ${card.attack} ë°ë¯¸ì§€!`, 'damage');

        if (target.currentHp <= 0) {
          gameState.enemy.field.shift();
          addLog(`${target.icon} ${target.name} íŒŒê´´!`, 'damage');
        }
      } else {
        gameState.enemy.hp = Math.max(0, gameState.enemy.hp - card.attack);
        addLog(`${card.icon} ì§ì ‘ ê³µê²©! ${card.attack} ë°ë¯¸ì§€!`, 'damage');
      }

      checkGameOver();
      updateUI();
    }

    function endTurn() {
      if (gameState.turn !== 'player') return;

      gameState.turn = 'enemy';
      document.getElementById('turnIndicator').textContent = 'ìƒëŒ€ í„´';
      document.getElementById('turnIndicator').classList.add('enemy');
      document.getElementById('endTurnBtn').disabled = true;

      // ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°ë¯¸ì§€
      if (gameState.memLeakTurns > 0) {
        gameState.enemy.hp = Math.max(0, gameState.enemy.hp - 15);
        gameState.memLeakTurns--;
        addLog(`ğŸ•³ï¸ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ë°ë¯¸ì§€! -15`, 'damage');
      }

      updateUI();

      // AI í„´
      setTimeout(() => {
        enemyTurn();
      }, 1000);
    }

    function enemyTurn() {
      addLog('ğŸ¤– DDoS ë´‡ì˜ í„´...', 'info');

      // ê°„ë‹¨í•œ AI: ëœë¤ ê³µê²©
      const attacks = ['ddos', 'spike', 'sqli'];
      const attackId = attacks[Math.floor(Math.random() * attacks.length)];
      const attackCard = allCards.find(c => c.id === attackId);

      setTimeout(() => {
        let damage = attackCard.attack;
        let blocked = false;

        // WAF ì²´í¬
        if (attackCard.id === 'sqli' && gameState.player.field.some(c => c.id === 'waf')) {
          addLog(`ğŸ›¡ï¸ WAFê°€ SQL Injectionì„ ë§‰ì•˜ìŠµë‹ˆë‹¤!`, 'info');
          blocked = true;
        }

        // SSL ê°ì†Œ íš¨ê³¼
        const hasSSL = gameState.player.field.some(c => c.id === 'ssl');
        if (hasSSL && !blocked) damage = Math.max(0, damage - 5);

        if (!blocked) {
          // í•„ë“œì— ì¹´ë“œê°€ ìˆìœ¼ë©´ ê·¸ ì¹´ë“œ ë¨¼ì € ê³µê²©
          if (gameState.player.field.length > 0) {
            const target = gameState.player.field[0];
            
            // Redis ë°©ì–´ íš¨ê³¼
            const hasRedis = gameState.player.field.some(c => c.id === 'redis');
            if (hasRedis && target.category === 'database') {
              damage = Math.floor(damage * 0.7);
            }

            target.currentHp -= damage;
            addLog(`${attackCard.icon} ${attackCard.name} â†’ ${target.icon} ${damage} ë°ë¯¸ì§€!`, 'damage');

            if (target.currentHp <= 0) {
              const destroyed = gameState.player.field.shift();
              addLog(`${destroyed.icon} ${destroyed.name} íŒŒê´´!`, 'damage');
            }
          } else {
            gameState.player.hp = Math.max(0, gameState.player.hp - damage);
            addLog(`${attackCard.icon} ${attackCard.name}! ${damage} ë°ë¯¸ì§€!`, 'damage');
          }
        }

        checkGameOver();

        // í„´ ì¢…ë£Œ
        setTimeout(() => {
          startPlayerTurn();
        }, 500);
      }, 800);
    }

    function startPlayerTurn() {
      gameState.turn = 'player';
      gameState.turnCount++;
      gameState.maxMana = Math.min(10, gameState.turnCount);
      gameState.currentMana = gameState.maxMana;

      // ì¹´ë“œ ë“œë¡œìš°
      const drawn = drawCard('player');
      if (drawn) addLog(`ì¹´ë“œ ë“œë¡œìš°: ${drawn.icon} ${drawn.name}`, 'info');

      // CI/CD íš¨ê³¼: ì¶”ê°€ ë“œë¡œìš°
      if (gameState.player.field.some(c => c.id === 'cicd')) {
        const bonus = drawCard('player');
        if (bonus) addLog(`ğŸ”„ CI/CD íš¨ê³¼: ${bonus.icon} ${bonus.name} ì¶”ê°€ ë“œë¡œìš°!`, 'info');
      }

      // í•„ë“œ ì¹´ë“œ ê³µê²© ê°€ëŠ¥
      gameState.player.field.forEach(c => c.canAttack = true);

      document.getElementById('turnIndicator').textContent = 'ë‚´ í„´';
      document.getElementById('turnIndicator').classList.remove('enemy');
      document.getElementById('endTurnBtn').disabled = false;

      updateUI();
    }

    function checkGameOver() {
      if (gameState.enemy.hp <= 0) {
        setTimeout(() => showGameOver(true), 500);
      } else if (gameState.player.hp <= 0) {
        setTimeout(() => showGameOver(false), 500);
      }
      updateUI();
    }

    function showGameOver(win) {
      const modal = document.getElementById('gameOverModal');
      const content = document.getElementById('gameOverContent');
      const title = document.getElementById('gameOverTitle');
      const msg = document.getElementById('gameOverMsg');

      content.className = 'game-over-content ' + (win ? 'win' : 'lose');
      title.textContent = win ? 'ğŸ‰ ìŠ¹ë¦¬!' : 'ğŸ’€ íŒ¨ë°°...';
      msg.textContent = win ? 'ìƒëŒ€ ì„œë²„ë¥¼ ë‹¤ìš´ì‹œì¼°ìŠµë‹ˆë‹¤!' : 'ì„œë²„ê°€ ë‹¤ìš´ë˜ì—ˆìŠµë‹ˆë‹¤...';

      modal.classList.add('active');
    }

    function restartGame() {
      document.getElementById('gameOverModal').classList.remove('active');
      startGame(gameState.difficulty);
    }

    function backToMenu() {
      document.getElementById('gameOverModal').classList.remove('active');
      gameContainer.classList.remove('active');
      gameStart.style.display = 'block';
    }

    function surrenderGame() {
      if (confirm('ì •ë§ ê¸°ê¶Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        showGameOver(false);
      }
    }

    function showHelp() {
      alert(`ğŸ® ê²Œì„ ë°©ë²•

1. ë§¤í„´ ë§ˆë‚˜ê°€ 1ì”© ì¦ê°€í•©ë‹ˆë‹¤ (ìµœëŒ€ 10)
2. í•¸ë“œì˜ ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´ í•„ë“œì— ë°°ì¹˜ë©ë‹ˆë‹¤
3. í•„ë“œì˜ ì¹´ë“œë¥¼ í´ë¦­í•˜ë©´ ê³µê²©í•©ë‹ˆë‹¤
4. ìƒëŒ€ ì„œë²„ HPë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ë©´ ìŠ¹ë¦¬!

ğŸ’¡ íŒ
- ë°©ì–´ ì¹´ë“œ(WAF, SSL)ë¡œ ê³µê²©ì„ ë§‰ìœ¼ì„¸ìš”
- RedisëŠ” DB ì•ì— ë°°ì¹˜í•˜ë©´ ë°ë¯¸ì§€ ê°ì†Œ
- CI/CDëŠ” ë§¤í„´ ì¶”ê°€ ë“œë¡œìš°!`);
    }

    function addLog(message, type = '') {
      const entry = document.createElement('div');
      entry.className = 'log-entry ' + type;
      entry.textContent = message;
      battleLog.appendChild(entry);
      battleLog.scrollTop = battleLog.scrollHeight;
    }

    function updateUI() {
      // ë§ˆë‚˜
      const manaOrbs = document.getElementById('manaOrbs');
      manaOrbs.innerHTML = Array(gameState.maxMana).fill(0).map((_, i) =>
        `<div class="mana-orb ${i >= gameState.currentMana ? 'empty' : ''}"></div>`
      ).join('');
      document.getElementById('manaText').textContent = `${gameState.currentMana}/${gameState.maxMana}`;

      // HP ë°”
      const playerHpPct = (gameState.player.hp / gameState.player.maxHp) * 100;
      const enemyHpPct = (gameState.enemy.hp / gameState.enemy.maxHp) * 100;

      document.getElementById('playerHpBar').style.width = playerHpPct + '%';
      document.getElementById('playerHpBar').className = 'health-bar-fill' + (playerHpPct < 30 ? ' low' : '');
      document.getElementById('playerHpText').textContent = `${gameState.player.hp}/${gameState.player.maxHp}`;

      document.getElementById('enemyHpBar').style.width = enemyHpPct + '%';
      document.getElementById('enemyHpBar').className = 'health-bar-fill' + (enemyHpPct < 30 ? ' low' : '');
      document.getElementById('enemyHpText').textContent = `${gameState.enemy.hp}/${gameState.enemy.maxHp}`;

      // í•¸ë“œ
      playerHand.innerHTML = gameState.player.hand.map((card, i) => `
        <div class="hand-card ${card.cost > gameState.currentMana ? 'disabled' : ''}" onclick="playCard(${i})">
          <div class="hand-card-cost">${card.cost}</div>
          <div class="hand-card-icon">${card.icon}</div>
          <div class="hand-card-name">${card.name}</div>
          <div class="hand-card-stats">
            <span>â¤ï¸${card.hp}</span>
            <span>âš”ï¸${card.attack}</span>
          </div>
        </div>
      `).join('');

      // í”Œë ˆì´ì–´ í•„ë“œ
      playerField.innerHTML = gameState.player.field.map((card, i) => `
        <div class="field-card ${card.canAttack ? 'can-attack' : ''}" onclick="attackWithFieldCard(${i})">
          <div class="field-card-icon">${card.icon}</div>
          <div class="field-card-name">${card.name}</div>
          <div class="field-card-atk">âš”ï¸${card.attack}</div>
          <div class="field-card-hp">â¤ï¸${card.currentHp}</div>
        </div>
      `).join('') || '<div style="color:#666;padding:20px;">ì¹´ë“œë¥¼ ë°°ì¹˜í•˜ì„¸ìš”</div>';

      // ì  í•„ë“œ
      enemyField.innerHTML = gameState.enemy.field.map(card => `
        <div class="field-card">
          <div class="field-card-icon">${card.icon}</div>
          <div class="field-card-name">${card.name}</div>
          <div class="field-card-atk">âš”ï¸${card.attack}</div>
          <div class="field-card-hp">â¤ï¸${card.currentHp}</div>
        </div>
      `).join('') || '<div style="color:#666;padding:20px;">ì  ì„œë²„</div>';
    }

    // ============ íƒ­/í•„í„° ============
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.tab).classList.add('active');
      });
    });

    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        renderCards(btn.dataset.filter);
      });
    });

    // ì´ˆê¸°í™”
    renderCards();
  </script>
</body>
</html>
